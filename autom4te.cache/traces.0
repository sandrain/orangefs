m4trace:maint/config/bdb.m4:1: -1- AC_DEFUN([AX_BERKELEY_DB], [
    dbpath=ifelse([$1], ,,$1)

    DB_LDFLAGS=
    dnl 
    dnl if the db is specified, try to link with -ldb
    dnl otherwise try -ldb4, then -ldb3, then -ldb
    dnl $lib set to notfound on link failure
    dnl    
    AC_MSG_CHECKING([for db library])
    oldlibs=$LIBS
    lib=notfound

    if test "x$dbpath" != "x" ; then
	oldcflags=$CFLAGS
	for dbheader in db4 db3 notfound; do
		AC_COMPILE_IFELSE(
			[AC_LANG_SOURCE([[#include "$dbpath/include/$dbheader/db.h"]])],
			[DB_CFLAGS="-I$dbpath/include/$dbheader/"
			 break])
	done

	if test "x$dbheader" = "xnotfound"; then
		AC_COMPILE_IFELSE(
			[AC_LANG_SOURCE([[#include "$dbpath/include/db.h"]])],
			[DB_CFLAGS="-I$dbpath/include/"],
			[AC_MSG_FAILURE(
				Invalid libdb path specified. No db.h found.)])
	fi

        DB_LDFLAGS="-L${dbpath}/lib"
	LDFLAGS="$DB_LDFLAGS ${LDFLAGS}"

	LIBS="${oldlibs} -ldb -lpthread"
	DB_LIB="-ldb"
	CFLAGS="$DB_CFLAGS $oldcflags"
	AC_TRY_LINK(
		[#include <db.h>],
		[DB *dbp; db_create(&dbp, NULL, 0);],
		lib=db)
	CFLAGS=$oldcflags
	
    else
        dnl Typically a distro's db-devel package (or whatever
        dnl they might call it) includes /usr/include/db.h. 
        dnl Sometimes /usr/include/db.h is just a sym-link to
        dnl the real db.h, which might be in /usr/include/xyzzy/db.h
        dnl or somesuch. Sometimes /usr/include/db.h is a real file
        dnl that contains a single line: #include <xyzzy/db.h>.
        dnl Sometimes /usr/include/db.h is the actual db include
        dnl file. 
        dnl
        dnl In the Schrödinger’s Cat release of Fedora (relase 19),
        dnl the db-devel package (libdb4-devel-4.8.30-10.fc19.x86_64)
        dnl has no /usr/include/db.h, only /usr/include/libdb4/db.h.
        dnl
        dnl And libdb.so is not in /usr/lib(64), rather it is in
        dnl /usr/lib(64)/libdb4...
        dnl
        dnl The next few lines try to find db.h and libdb.so where ever
        dnl they might be stashed below /usr/include and /usr/lib(64)
        dnl and add those locations to CFLAGS and LDFLAGS.
	dnl
        dnl when we have rpm, we can use it to insure that the 
        dnl db.h and libdb that we find are from the same package.
        dnl If we don't have rpm, we'll just hope they're from the same
        dnl package...
        RPMPATH=`which rpm`
        if test "$RPMPATH" != ""
        then
          RPMCOMMAND="rpm -qf "
        else
          RPMCOMMAND=": # "
        fi
        DBDOTH=""
        for i in `find /usr/include -name db.h`
        do
          if test "$i" = "/usr/include/db.h"
          then
            DBDOTH=""
            break
          else
            DBDOTH="$i"
          fi
        done
        if test "$DBDOTH" != ""
        then
          DB_CFLAGS="-I `dirname $DBDOTH`"
          CFLAGS="$CFLAGS $DB_CFLAGS"
          DBPACKAGE=`$RPMCOMMAND -qf $DBDOTH`
        else
          DBPACKAGE=""
        fi

        strings /etc/ld.so.cache | grep -q /lib64
        if test "$?" = "0"
        then
          LIBPATH="/usr/lib64"
        else
          LIBPATH="/usr/lib"
        fi
      
        for i in `find "$LIBPATH" -name libdb.so`
        do
          LIBPACKAGE=`$RPMCOMMAND -qf $i`
          if test "$DBPACKAGE" = "$LIBPACKAGE"
          then
            LDFLAGS="$LDFLAGS -L"`dirname $i`
          fi
        done

        for lib in db4  db3  db  notfound; do
           LIBS="${oldlibs} -l$lib -lpthread"
           DB_LIB="-l$lib"
           AC_TRY_LINK(
                  [#include <db.h>],
                  [DB *dbp; db_create(&dbp, NULL, 0);],
                  [break])
        done
    fi

    dnl reset LIBS value and just report through DB_LIB
    LIBS=$oldlibs 
    if test "x$lib" = "xnotfound" ; then
           AC_MSG_ERROR(could not find DB libraries)
    else
           AC_MSG_RESULT($lib)
    fi
    AC_SUBST(DB_CFLAGS)	
    AC_SUBST(DB_LIB)
    
    dnl See if we have a new enough version of Berkeley DB; needed for
    dnl    compilation of trove-dbpf component
    dnl AC_MSG_CHECKING(whether version of Berkeley DB is new enough)
    dnl       AC_TRY_COMPILE([
    dnl       #include <db.h>
    dnl       ], [
    dnl       #if DB_VERSION_MAJOR < 4
    dnl              #error "DB_VERSION_MAJOR < 4; need newer Berkeley DB implementation"
    dnl       #endif
    dnl       ], AC_MSG_RESULT(yes),
    dnl       AC_MSG_RESULT(no)
    dnl              AC_MSG_ERROR(Need newer (4.x.x or later) version of Berkeley DB.
    dnl try: http://www.sleepycat.com/download/index.shtml
    dnl or: /parl/pcarns/rpms/db4-4.0.14-1mdk.src.rpm (to build rpm))
    dnl       )

    oldcflags=$CFLAGS
    CFLAGS="$USR_CFLAGS $DB_CFLAGS -Werror"    
    dnl Test to check for unknown third param to DB stat (four params 
    dnl total).  The unknown parameter is a function ptr so that the
    dnl the user can pass in a replcaement for malloc.
    dnl Note: this is a holdover from relatively old DB implementations,
    dnl while the txnid parameter is new.  So we don't test for the old
    dnl unknown parameter if we found the new one.
    AC_MSG_CHECKING(for DB stat with malloc function ptr)
    AC_TRY_COMPILE([
      #include <db.h>
      #include <stdlib.h>
      ], [
      int ret = 0;
      DB *db = db;
      int dummy = 0;
      u_int32_t flags = 0;
        
      ret = db->stat(db, &dummy, malloc, flags);
      ], AC_MSG_RESULT(yes)
    AC_DEFINE(HAVE_UNKNOWN_PARAMETER_TO_DB_STAT, 1,
    Define if DB stat function takes malloc function ptr)
    have_db_stat_malloc=yes,
    AC_MSG_RESULT(no)
    have_db_stat_malloc=no)

    dnl check for DB_DIRTY_READ (it is not in db-3.2.9, for example)
    AC_MSG_CHECKING(for DB_DIRTY_READ flag)
    AC_TRY_COMPILE([
    #include <db.h>
    ], [
    u_int32_t flags = DB_DIRTY_READ;
    ], AC_MSG_RESULT(yes)
    AC_DEFINE(HAVE_DB_DIRTY_READ, 1, [Define if db library has DB_DIRTY_READ flag]),
    AC_MSG_RESULT(no))

    dnl check for DB_BUFFER_SMALL (it is returned by dbp->get in db-4.4 and up)
    AC_MSG_CHECKING(for DB_BUFFER_SMALL error)
    AC_TRY_COMPILE([
    #include <db.h>
    ], [
    int res = DB_BUFFER_SMALL;
    res++;
    ], AC_MSG_RESULT(yes)
    AC_DEFINE(HAVE_DB_BUFFER_SMALL, 1, [Define if db library has DB_BUFFER_SMALL error]),
    AC_MSG_RESULT(no))

    dnl Check BDB version here since it's just a warning
    AC_MSG_CHECKING([Berkeley DB version])
    AC_TRY_COMPILE(
        [
            #include <db.h>
        ], 
        [
             #if DB_VERSION_MAJOR < 4 || \
                (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR < 8) || \
                (DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR == 8 && \
                 DB_VERSION_PATCH < 30)
                 #error "Recommend version of Berkeley DB at least 4.8.30"
             #endif
        ], 
        AC_MSG_RESULT(yes)
        HAVE_DB_OLD=0,
        AC_MSG_RESULT(no)
        HAVE_DB_OLD=1
    )
    CFLAGS="$oldcflags"    
])
m4trace:maint/config/getgrouplist.m4:1: -1- AC_DEFUN([AX_GETGROUPLIST], [
	AC_MSG_CHECKING(for getgrouplist in distro)
	dnl if this test passes, the distro does have it
	dnl if this test fails, the distro does not have it

	AC_EGREP_HEADER(getgrouplist, grp.h, 
	                AC_MSG_RESULT(yes) 
                        AC_DEFINE(HAVE_GETGROUPLIST, 1, Define if distro has getgrouplist), 
		        AC_EGREP_HEADER(getgrouplist, unistd.h, 
		                        AC_MSG_RESULT(yes) 
                                        AC_DEFINE(HAVE_GETGROUPLIST, 1, Define if distro has getgrouplist), 
		                        AC_MSG_RESULT(no)
                        ,) 
	,)


        dnl Does getgrouplist use gid_t or int for the group parameter?

        AC_MSG_CHECKING(is gid_t type used for groups in getgrouplist)
        AC_EGREP_HEADER(getgrouplist.*gid_t.*group, grp.h,
                        AC_MSG_RESULT(yes)
                        AC_DEFINE(HAVE_GETGROUPLIST_GID, 1, Define if getgrouplist() uses gid_t as 3rd param),
                        AC_EGREP_HEADER(getgrouplist.*gid_t.*group, unistd.h,
                                        AC_MSG_RESULT(yes)
                                        AC_DEFINE(HAVE_GETGROUPLIST_GID, 1, Define if getgrouplist() uses gid_t as 3rd param),
                                        AC_MSG_RESULT(no)
                        ,)
        ,)

        dnl Does getgrouplist use int for the group parameter?

	AC_MSG_CHECKING(is int type used for groups in getgrouplist)
        AC_EGREP_HEADER(getgrouplist.*int.\*, grp.h,
                        AC_MSG_RESULT(yes)
                        AC_DEFINE(HAVE_GETGROUPLIST_INT, 1, Define if getgrouplist() uses int as 3rd param),
                        AC_EGREP_HEADER(getgrouplist.*int.\*, unistd.h,
                                        AC_MSG_RESULT(yes)
                                        AC_DEFINE(HAVE_GETGROUPLIST_INT, 1, Define if getgrouplist() uses int as 3rd param),
                                        AC_MSG_RESULT(no)
                        ,)
        ,)
])
m4trace:maint/config/gm.m4:8: -1- AC_DEFUN([AX_GM], [
    dnl Configure options for GM install path.
    dnl --with-gm=<dir> is shorthand for
    dnl    --with-gm-includes=<dir>/include
    dnl    --with-gm-libs=<dir>/lib  (or lib64 if that exists)
    gm_home=
    AC_ARG_WITH(gm,
[  --with-gm=<dir>         Location of the GM install (default no GM)],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-gm requires the path to your GM tree.])
	elif test "$withval" != no ; then
	    gm_home="$withval"
	fi
    )
    AC_ARG_WITH(gm-includes,
[  --with-gm-includes=<dir>
                          Location of the GM includes],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-gm-includes requires path to GM headers.])
	elif test "$withval" != no ; then
	    GM_INCDIR="$withval"
	fi
    )
    AC_ARG_WITH(gm-libs,
[  --with-gm-libs=<dir>    Location of the GM libraries],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-gm-libs requires path to GM libraries.])
	elif test "$withval" != no ; then
	    GM_LIBDIR="$withval"
	fi
    )
    dnl If supplied the incls and libs explicitly, use them, else populate them
    dnl using guesses from the --with-gm dir.
    if test -n "$gm_home" ; then
	if test -z "$GM_INCDIR"; then
	    GM_INCDIR=$gm_home/include
	fi
	if test -z "$GM_LIBDIR"; then
	    GM_LIBDIR=$gm_home/lib64
	    if test ! -d "$GM_LIBDIR" ; then
		GM_LIBDIR=$gm_home/lib
	    fi
	fi
    fi
    dnl If anything GM-ish was set, go look for header.
    if test -n "$GM_INCDIR$GM_LIBDIR" ; then
	save_cppflags="$CPPFLAGS"
	CPPFLAGS="$CPPFLAGS -I$GM_INCDIR -I$GM_INCDIR/gm"
	AC_CHECK_HEADER(gm.h,, AC_MSG_ERROR([Header gm.h not found.]))
	dnl Run test is not possible on a machine that does not have a GM NIC.
	dnl Link test would work, but just check for existence.
	if test ! -f $GM_LIBDIR/libgm.so ; then
	    if test ! -f $GM_LIBDIR/libgm.a ; then
		AC_MSG_ERROR([Neither GM library libgm.so or libgm.a found.])
	    fi
	fi
	BUILD_GM=1
	CPPFLAGS="$save_cppflags"
    fi
    AC_SUBST(BUILD_GM)
    AC_SUBST(GM_INCDIR)
    AC_SUBST(GM_LIBDIR)
])
m4trace:maint/config/ib.m4:1: -1- AC_DEFUN([AX_IB], [
    dnl Configure options for IB install path.
    dnl --with-ib=<dir> is shorthand for
    dnl    --with-ib-includes=<dir>/include
    dnl    --with-ib-libs=<dir>/lib  (or lib64 if that exists)
    ib_home=
    AC_ARG_WITH(ib,
    [  --with-ib=<dir>         Location of the IB installation (default no IB)],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-ib requires the path to your IB tree.])
	elif test "$withval" != no ; then
	    ib_home="$withval"
	fi
    )
    AC_ARG_WITH(ib-includes,
[  --with-ib-includes=<dir>
                          Location of the IB includes],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-ib-includes requires path to IB headers.])
	elif test "$withval" != no ; then
	    IB_INCDIR="$withval"
	fi
    )
    AC_ARG_WITH(ib-libs,
[  --with-ib-libs=<dir>    Location of the IB libraries],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-ib-libs requires path to IB libraries.])
	elif test "$withval" != no ; then
	    IB_LIBDIR="$withval"
	fi
    )
    dnl If supplied the incls and libs explicitly, use them, else populate them
    dnl using guesses from the --with-ib dir.
    if test -n "$ib_home" ; then
	if test -z "$IB_INCDIR"; then
	    IB_INCDIR=$ib_home/include
	fi
	if test -z "$IB_LIBDIR"; then
	    IB_LIBDIR=$ib_home/lib64
	    if test ! -d "$IB_LIBDIR" ; then
		IB_LIBDIR=$ib_home/lib
	    fi
	fi
    fi
    dnl If anything IB-ish was set, go look for header.
    if test -n "$IB_INCDIR$IB_LIBDIR" ; then
	save_cppflags="$CPPFLAGS"
	CPPFLAGS="$CPPFLAGS -I$IB_INCDIR"
	AC_CHECK_HEADER(vapi.h,, AC_MSG_ERROR([Header vapi.h not found.]))
	dnl Run test is not possible on a machine that does not have an IB NIC,
	dnl and link test is hard because we need so many little libraries.   Bail
	dnl and just check for existence; full library list is in Makefile.in.
	if test ! -f $IB_LIBDIR/libvapi.so ; then
	    if test ! -f $IB_LIBDIR/libvapi.a ; then
		AC_MSG_ERROR([Infiniband library libvapi.so not found.])
	    fi
	fi
	BUILD_IB=1
	AC_CHECK_HEADER(wrap_common.h,
	    AC_DEFINE(HAVE_IB_WRAP_COMMON_H, 1, Define if IB wrap_common.h exists.),
	    ,
	    [#include <vapi.h>])
	CPPFLAGS="$save_cppflags"
    fi
    AC_SUBST(BUILD_IB)
    AC_SUBST(IB_INCDIR)
    AC_SUBST(IB_LIBDIR)

    dnl Configure options for OpenIB install path.
    dnl --with-openib=<dir> is shorthand for
    dnl    --with-openib-includes=<dir>/include
    dnl    --with-openib-libs=<dir>/lib  (or lib64 if that exists)
    openib_home=
    AC_ARG_WITH(openib,
    [  --with-openib=<dir>     Location of the OpenIB install (default no OpenIB)],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-openib requires the path to your OpenIB tree.])
	elif test "$withval" != no ; then
	    openib_home="$withval"
	fi
    )
    AC_ARG_WITH(openib-includes,
[  --with-openib-includes=<dir>
                          Location of the OpenIB includes],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-openib-includes requires path to OpenIB headers.])
	elif test "$withval" != no ; then
	    OPENIB_INCDIR="$withval"
	fi
    )
    AC_ARG_WITH(openib-libs,
[  --with-openib-libs=<dir>
                          Location of the OpenIB libraries],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-openib-libs requires path to OpenIB libraries.])
	elif test "$withval" != no ; then
	    OPENIB_LIBDIR="$withval"
	fi
    )
    dnl If supplied the incls and libs explicitly, use them, else populate them
    dnl using guesses from the --with-openib dir.
    if test -n "$openib_home" ; then
	if test -z "$OPENIB_INCDIR"; then
	    OPENIB_INCDIR=$openib_home/include
	fi
	if test -z "$OPENIB_LIBDIR"; then
	    OPENIB_LIBDIR=$openib_home/lib64
	    if test ! -d "$OPENIB_LIBDIR" ; then
		OPENIB_LIBDIR=$openib_home/lib
	    fi
	fi
    fi
    dnl If anything OpenIB-ish was set, go look for header.
    if test -n "$OPENIB_INCDIR$OPENIB_LIBDIR" ; then
	save_cppflags="$CPPFLAGS"
	CPPFLAGS="$CPPFLAGS -I$OPENIB_INCDIR"
	AC_CHECK_HEADER(infiniband/verbs.h,,
	    AC_MSG_ERROR([Header infiniband/verbs.h not found.]))
	dnl Run test is not possible on a machine that does not have an IB NIC.
	dnl Link test would work, but just check for existence.
	if test ! -f $OPENIB_LIBDIR/libibverbs.so ; then
	    if test ! -f $OPENIB_LIBDIR/libibverbs.a ; then
		AC_MSG_ERROR([OpenIB library libibverbs.so not found.])
	    fi
	fi
	BUILD_OPENIB=1
	CPPFLAGS="$save_cppflags"
    fi
    AC_SUBST(BUILD_OPENIB)
    AC_SUBST(OPENIB_INCDIR)
    AC_SUBST(OPENIB_LIBDIR)

    if test -n "$BUILD_OPENIB" ; then
	dnl Check for which version of the ibverbs library; device opening is
	dnl different.  This format is the older one, newer is
	dnl ibv_get_device_list.
	save_ldflags="$LDFLAGS"
	LDFLAGS="-L$OPENIB_LIBDIR -libverbs"
	save_cppflags="$CPPFLAGS"
	CPPFLAGS="$CPPFLAGS -I$OPENIB_INCDIR"

	AC_MSG_CHECKING(for ibv_get_devices)
	AC_TRY_LINK([], [
	    ibv_get_devices();
	    ],
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_IBV_GET_DEVICES, 1,
		      Define if libibverbs has ibv_get_devices),
	    AC_MSG_RESULT(no)
	)

	dnl Check for existence of reregister event; it's somewhat new.
	AC_MSG_CHECKING(for IBV_EVENT_CLIENT_REREGISTER)
	AC_TRY_COMPILE([
	    #include "infiniband/verbs.h"
	], [
	    enum ibv_event_type x = IBV_EVENT_CLIENT_REREGISTER;
	],
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_IBV_EVENT_CLIENT_REREGISTER, 1,
		      Define if libibverbs has reregister event),
	    AC_MSG_RESULT(no)
	)

    dnl Check for existence of experimental Dynamically Connected 
    dnl Transport events.
    AC_MSG_CHECKING(for IBV_EXP_EVENT_DCT_KEY_VIOLATION)
    AC_TRY_COMPILE([
        #include "infiniband/verbs.h"
    ], [
        enum ibv_event_type x = IBV_EXP_EVENT_DCT_KEY_VIOLATION;
    ],
        AC_MSG_RESULT(yes)
        AC_DEFINE(HAVE_IBV_EXP_EVENT_DCT_KEY_VIOLATION, 1,
              Define if libibverbs has dct key violation event),
        AC_MSG_RESULT(no)
    )

    AC_MSG_CHECKING(for IBV_EXP_EVENT_DCT_ACCESS_ERR)
    AC_TRY_COMPILE([
        #include "infiniband/verbs.h"
    ], [
        enum ibv_event_type x = IBV_EXP_EVENT_DCT_ACCESS_ERR;
    ],
        AC_MSG_RESULT(yes)
        AC_DEFINE(HAVE_IBV_EXP_EVENT_DCT_ACCESS_ERR, 1,
              Define if libibverbs has dct access error event),
        AC_MSG_RESULT(no)
    )

    AC_MSG_CHECKING(for IBV_EXP_EVENT_DCT_REQ_ERR)
    AC_TRY_COMPILE([
        #include "infiniband/verbs.h"
    ], [
        enum ibv_event_type x = IBV_EXP_EVENT_DCT_REQ_ERR;
    ],
        AC_MSG_RESULT(yes)
        AC_DEFINE(HAVE_IBV_EXP_EVENT_DCT_REQ_ERR, 1,
              Define if libibverbs has dct request error event),
        AC_MSG_RESULT(no)
    )

	LDFLAGS="$save_ldflags"
	CPPFLAGS="$save_cppflags"
    fi
])
m4trace:maint/config/kernel.m4:1: -1- AC_DEFUN([AX_KERNEL_FEATURES], [
	dnl 
	dnl kernel feature tests.  Set CFLAGS once here and use it for all
	dnl kernel features.  reset to the old value at the end. 
	dnl 
	dnl on some systems, there is a /usr/include/linux/xattr_acl.h , so the
	dnl check for xattr_acl.h down below will always pass, even if it
	dnl should fail.  this hack (-nostdinc -isystem ...) will bring in just
	dnl enough system headers dnl for kernel compilation

	dnl -Werror can be overkill, but for these kernel feature tests
	dnl 'implicit function declaration' usually ends up in an undefined
	dnl symbol somewhere.

        dnl opensuse11.2 32bit only reports the correct include path when in
        dnl specific directories, must be some search path broken-ness? 
        dnl switching to / fixes the problem and shouldn't break others

	NOSTDINCFLAGS="-Werror-implicit-function-declaration -nostdinc -isystem `$CC -print-file-name=include`"

        dnl SuSE and other distros that have a separate kernel obj directory 
        dnl need to have include files from both the obj directory and the
        dnl full source listed in the includes. Kbuild handles this when 
        dnl compiling but the configure checks don't handle this on their own.
        dnl The strategy here is just to set a new variable, lk_src_source,
        dnl when the provided kernel source has a source directory. If it
        dnl doesn't exist just set it lk_src. There may be a cleaner way to do
        dnl this, for now, this appears to do the trick.
        if test -d $lk_src/source; then
            lk_src_source="$lk_src/source"
        else
            lk_src_source=$lk_src
        fi

	CFLAGS="$USR_CFLAGS $NOSTDINCFLAGS -I$lk_src_source/include -I$lk_src_source/include/asm/mach-default -DKBUILD_STR(s)=#s -DKBUILD_BASENAME=KBUILD_STR(empty)  -DKBUILD_MODNAME=KBUILD_STR(empty)"

	dnl kernels > 2.6.32 now use generated/autoconf.h
        dnl look in lk_src for the generated autoconf.h
	if test -f $lk_src/include/generated/autoconf.h ; then
		CFLAGS="$CFLAGS -imacros $lk_src/include/generated/autoconf.h"
	else
		CFLAGS="$CFLAGS -imacros $lk_src/include/linux/autoconf.h"
	fi

        dnl we probably need additional includes if this build is intended
        dnl for a different architecture
	if test -n "${ARCH}" ; then
		CFLAGS="$CFLAGS -I$lk_src_source/arch/${ARCH}/include -I$lk_src_source/arch/${ARCH}/include/asm/mach-default"
        else
            SUBARCH=`uname -m | sed -e s/i.86/i386/ -e s/sun4u/sparc64/ \
            -e s/arm.*/arm/ -e s/sa110/arm/ \
            -e s/s390x/s390/ -e s/parisc64/parisc/ \
            -e s/ppc.*/powerpc/ -e s/mips.*/mips/ \
            -e s/sh.*/sh/`
            if test "x$SUBARCH" = "xi386"; then
                ARCH=x86    
            elif test "x$SUBARCH" = "xx86_64"; then
                ARCH=x86    
            elif test "x$SUBARCH" = "xsparc64"; then
                ARCH=sparc    
            else
                ARCH=$SUBARCH
            fi

            CFLAGS="$CFLAGS -I$lk_src_source/arch/${ARCH}/include -I$lk_src_source/arch/${ARCH}/include/asm/mach-default"

	fi

        dnl After the "UAPI header file split" in linux-3.9.7, the
        dnl uapi header file locations need to be added to CFLAGS.
        if test -n "${ARCH}" &&  
           test -d $lk_src_source/arch/${ARCH}/include/uapi; then
             CFLAGS="$CFLAGS -I$lk_src_source/arch/${ARCH}/include/uapi"
             CFLAGS="$CFLAGS -I$lk_src_source/arch/${ARCH}/include/generated/uapi"
        fi
        if test -d $lk_src_source/include/uapi; then
             CFLAGS="$CFLAGS -I$lk_src_source/include/uapi"
        fi

        dnl directories named "generated" under $lk_src are in paths that
        dnl need to be searched for include files
        for i in `find "$lk_src" -follow -name generated`
        do
          addThis="`echo $i | sed 's/generated.*$//'`"
          addThisToo="`echo $i | sed 's/generated.*$/generated/'`"
          CFLAGS="$CFLAGS -I$addThis -I$addThisToo"
        done

	dnl Check for kconfig.h... at some revision levels, many
	dnl tests use IS_ENABLED indirectly through includes... 
	AC_MSG_CHECKING(for kconfig.h) 
	AC_TRY_COMPILE([
		#include <linux/kconfig.h>
	], [
		;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_KCONFIG, 1, Define if kconfig.h exists),
	AC_MSG_RESULT(no)
	)

	dnl Check for vmtruncate. vmtruncate has been deprecated for
	dnl a while, it is gone by 3.8. 
	dnl "The whole truncate sequence needs to be implemented in ->setattr"
	dnl      ./Documentation/filesystems/porting
	dnl google "__kfree_rcu breaks third-party kernel code" to learn
	dnl why -O2 is needed in CFLAGS for this test...
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -O2"
	AC_MSG_CHECKING(for vmtruncate) 
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/mm.h>
	], [
                struct iattr *iattr;
                struct inode *inode;
		vmtruncate(inode, iattr->ia_size);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_VMTRUNCATE, 1, Define if vmtruncate exists),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

        dnl in later 4.4 kernels a "user namespace" parameter was added to 
        dnl posix_acl_valid... 
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -O2"
	AC_MSG_CHECKING(for namespace parameter in posix_acl_valid) 
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/posix_acl_xattr.h>
	], [
		struct posix_acl A;
		posix_acl_valid(&init_user_ns, &A);

	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_POSIX_ACL_VALID_USER_NAMESPACE, 1, Define if the user namespace has been added to posix_acl_valid),
	AC_MSG_RESULT(no)
    )
	CFLAGS=$tmp_cflags

        dnl in 3.8 a "user namespace" parameter was added to 
        dnl posix_acl_from_xattr... 
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -O2"
	AC_MSG_CHECKING(for namespace parameter in posix_acl_from_xattr) 
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/posix_acl_xattr.h>
	], [
		int i;
		char *c;
		posix_acl_from_xattr(&init_user_ns, c, i);

	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_POSIX_ACL_USER_NAMESPACE, 1, Define if the user namespace has been added to posix_acl_from_xattr and posix_acl_to_xattr),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

        dnl in 2.6.40 (maybe .39 too) inclusion of linux/fs.h breaks unless
        dnl optimization flag of some sort is set. To complicate matters 
        dnl checks in earlier versions break when optimization is turned on.
        need_optimize_flag=0
	AC_MSG_CHECKING(for sanity of linux/fs.h include)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
	], [],
		AC_MSG_RESULT(yes),
		AC_MSG_RESULT(no)
                need_optimize_flag=1,
	)
        if test $need_optimize_flag -eq 1; then
            CFLAGS="-Os $CFLAGS"
        fi

    dnl by 3.4 create's third argument changed from int to umode_t.
    tmp_cflags=$CFLAGS
    CFLAGS="$CFLAGS -Werror"
    AC_MSG_CHECKING([if kernel inode ops create uses umode_t])
	AC_TRY_COMPILE(
        [
		    #define __KERNEL__
            #ifdef HAVE_KCONFIG
            #include <linux/kconfig.h>
            #endif
		    #include <linux/fs.h>
            extern int mycreate(struct inode *,
                                struct dentry *,
                                umode_t,
                                struct nameidata *);
        ], [
			static struct inode_operations in_op = {
				  .create = mycreate
			};
		], [
            AC_MSG_RESULT(yes)
            AC_DEFINE(PVFS_KMOD_CREATE_USES_UMODE_T, 1,
                [Define if kernel inode ops create uses umode_t not int])
        ], [
            AC_MSG_RESULT(no)
        ]
	)
    CFLAGS=$tmp_cflags


    dnl by 3.4 mkdir's third argument changed from int to umode_t.
    tmp_cflags=$CFLAGS
    CFLAGS="$CFLAGS -Werror"
    AC_MSG_CHECKING([if kernel inode ops mkdir uses umode_t])
	AC_TRY_COMPILE(
        [
		    #define __KERNEL__
            #ifdef HAVE_KCONFIG
            #include <linux/kconfig.h>
            #endif
		    #include <linux/fs.h>
            extern int mymkdir(struct inode *,
                                struct dentry *,
                                umode_t);
        ], [
			static struct inode_operations in_op = {
				  .mkdir = mymkdir
			};
		], [
            AC_MSG_RESULT(yes)
            AC_DEFINE(PVFS_KMOD_MKDIR_USES_UMODE_T, 1,
                [Define if kernel inode ops mkdir uses umode_t not int])
        ], [
            AC_MSG_RESULT(no)
        ]
	)
    CFLAGS=$tmp_cflags


    dnl by 3.4 mknod's third argument changed from int to umode_t.
    tmp_cflags=$CFLAGS
    CFLAGS="$CFLAGS -Werror"
    AC_MSG_CHECKING([if kernel inode ops mknod uses umode_t])
	AC_TRY_COMPILE(
        [
		    #define __KERNEL__
            #ifdef HAVE_KCONFIG
            #include <linux/kconfig.h>
            #endif
		    #include <linux/fs.h>
            extern int mymknod(struct inode *,
                                struct dentry *,
                                umode_t,
                                dev_t);
        ], [
			static struct inode_operations in_op = {
				  .mknod = mymknod
			};
		], [
            AC_MSG_RESULT(yes)
            AC_DEFINE(PVFS_KMOD_MKNOD_USES_UMODE_T, 1,
                [Define if kernel inode ops mknod uses umode_t not int])
        ], [
            AC_MSG_RESULT(no)
        ]
	)
    CFLAGS=$tmp_cflags

    dnl between 3.6 and 3.9 create() lookup() and d_revalidate() lose
    dnl their struct nameidata argument.  d_revalidate seems to be
    dnl handled be we will test for the other two check create.
    dnl Create args for different versions:
    dnl  3.2: (struct inode *,struct dentry *,int, struct nameidata *);
    dnl  3.4: (struct inode *,struct dentry *,umode_t,struct nameidata *)
    dnl  3.6: (struct inode *,struct dentry *, umode_t, bool);
    dnl  a previous test (if kernel inode ops create uses umode_t) sets
    dnl  a define that helps us in this test.
    tmp_cflags=$CFLAGS
    CFLAGS="$CFLAGS -Werror"
    AC_MSG_CHECKING([if kernel inode ops create takes nameidata])
	AC_TRY_COMPILE(
        [
		    #define __KERNEL__
            #ifdef HAVE_KCONFIG
            #include <linux/kconfig.h>
            #endif
		    #include <linux/fs.h>
            extern int mycreate(struct inode *,
                                struct dentry *,
		    #ifdef PVFS_KMOD_CREATE_USES_UMODE_T
		                umode_t mode,
		    #else
                                int,
		    #endif
                                struct nameidata *);
        ], [
			static struct inode_operations in_op = {
				  .create = mycreate
			};
		], [
            AC_MSG_RESULT(yes)
            AC_DEFINE(PVFS_KMOD_CREATE_TAKES_NAMEIDATA, 1,
                [Define if kernel inode ops create takes nameidata not bool])
        ], [
            AC_MSG_RESULT(no)
        ]
	)
    CFLAGS=$tmp_cflags

    dnl check lookup
    tmp_cflags=$CFLAGS
    CFLAGS="$CFLAGS -Werror"
    AC_MSG_CHECKING([if kernel inode ops lookup takes nameidata])
	AC_TRY_COMPILE(
        [
		    #define __KERNEL__
            #ifdef HAVE_KCONFIG
            #include <linux/kconfig.h>
            #endif
		    #include <linux/fs.h>
            extern struct dentry *mylookup(struct inode *,
                                           struct dentry *,
                                           struct nameidata *);
        ], [
			static struct inode_operations in_op = {
				  .lookup = mylookup
			};
		], [
            AC_MSG_RESULT(yes)
            AC_DEFINE(PVFS_KMOD_LOOKUP_TAKES_NAMEIDATA, 1,
                [Define if kernel inode ops lookup takes nameidata])
        ], [
            AC_MSG_RESULT(no)
        ]
	)
    CFLAGS=$tmp_cflags

    dnl check revalidate
    tmp_cflags=$CFLAGS
    CFLAGS="$CFLAGS -Werror"
    AC_MSG_CHECKING([for if kernel dentry ops d_revalidate takes nameidata])
	AC_TRY_COMPILE(
        [
		    #define __KERNEL__
            #ifdef HAVE_KCONFIG
            #include <linux/kconfig.h>
            #endif
		    #include <linux/fs.h>
		    #include <linux/dcache.h>
            extern int myreval(struct dentry *, struct nameidata *);
        ], [
			static struct dentry_operations dc_op = {
				  .d_revalidate = myreval
			};
		], [
            AC_MSG_RESULT(yes)
            AC_DEFINE(PVFS_KMOD_D_REVALIDATE_TAKES_NAMEIDATA, 1,
                [Define if kernel dentry ops d_revalidate takes nameidata])
        ], [
            AC_MSG_RESULT(no)
        ]
	)
    CFLAGS=$tmp_cflags

    dnl kernel 3.6-3.9 added get_acl as a method rather than using
    dnl check_acl passed into generic_permissions
    AC_MSG_CHECKING([if kernel inode ops has get_acl ])
	AC_TRY_COMPILE(
        [
		    #define __KERNEL__
            #ifdef HAVE_KCONFIG
            #include <linux/kconfig.h>
            #endif
		    #include <linux/fs.h>
        ], [
			static struct inode_operations in_op = {
				  .get_acl = NULL
			};
		], [
            AC_MSG_RESULT(yes)
            AC_DEFINE(PVFS_KMOD_HAVE_GET_ACL, 1,
                [Define if kernel inode ops has get_acl])
        ], [
            AC_MSG_RESULT(no)
        ]
	)

        dnl if there are two different include paths (lk_src/include and 
        dnl lk_src_source/include) add the lk_src/include path to the CFLAGS
        dnl here.
        if test "$lk_src" != "$lk_src_source"; then
            CFLAGS="$CFLAGS -I$lk_src/include"
        fi

dnl newer 3.3 kernels and above use d_make_root instead of d_alloc_root
        AC_MSG_CHECKING(for d_alloc_root)
        AC_TRY_COMPILE(
        [
                #define __KERNEL__
                #ifdef HAVE_KCONFIG
                #include <linux/kconfig.h>
                #endif
                #include <linux/fs.h>
        ], [
                struct inode  *root_inode;
		        struct dentry *root_dentry;
                root_dentry=d_alloc_root(root_inode);
        ], [
                AC_MSG_RESULT(yes)
                AC_DEFINE(HAVE_D_ALLOC_ROOT, 1, [Define if kernel defines
                          d_alloc_root])
        ], [
                AC_MSG_RESULT(no)
        ]
        )

	AC_MSG_CHECKING(for i_size_write in kernel)
	dnl if this test passes, the kernel does not have it
	dnl if this test fails, the kernel already defined it
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		void i_size_write(struct inode *inode,
				loff_t i_size)
		{
			return;
		}
	], [],
		AC_MSG_RESULT(no),
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_I_SIZE_WRITE, 1, Define if kernel has i_size_write),
	)

	AC_MSG_CHECKING(for i_size_read in kernel)
	dnl if this test passes, the kernel does not have it
	dnl if this test fails, the kernel already defined it
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		loff_t i_size_read(struct inode *inode)
		{
			return 0;
		}
	], [],
		AC_MSG_RESULT(no),
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_I_SIZE_READ, 1, Define if kernel has i_size_read),
	)

	AC_MSG_CHECKING(for iget_locked function in kernel)
	dnl if this test passes, the kernel does not have it
	dnl if this test fails, the kernel already defined it
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		loff_t iget_locked(struct inode *inode)
		{
			return 0;
		}
	], [],
		AC_MSG_RESULT(no),
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_IGET_LOCKED, 1, Define if kernel has iget_locked),
	)

	AC_MSG_CHECKING(for iget4_locked function in kernel)
	dnl if this test passes, the kernel does not have it
	dnl if this test fails, the kernel already defined it
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		loff_t iget4_locked(struct inode *inode)
		{
			return 0;
		}
	], [],
		AC_MSG_RESULT(no),
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_IGET4_LOCKED, 1, Define if kernel has iget4_locked),
	)

        AC_MSG_CHECKING(for backing_dev_info in struct address_space)
	dnl backing_dev_info was removed from struct address_space
	dnl around 4.1
        AC_TRY_COMPILE([
                #define __KERNEL__
                #ifdef HAVE_KCONFIG
                #include <linux/kconfig.h>
                #endif
                #include <linux/fs.h>
                static struct address_space foo = {
                         .backing_dev_info = NULL,
                };
        ], [],
                AC_MSG_RESULT(yes)
                AC_DEFINE(BACKING_DEV_IN_ADDR_SPACE,
                          1,
                          Define if struct  backing_dev_info is defined),
                AC_MSG_RESULT(no)
        )

	AC_MSG_CHECKING(for iget5_locked function in kernel)
	dnl if this test passes, the kernel does not have it
	dnl if this test fails, the kernel already defined it
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		loff_t iget5_locked(struct inode *inode)
		{
			return 0;
		}
	], [],
		AC_MSG_RESULT(no),
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_IGET5_LOCKED, 1, Define if kernel has iget5_locked),
	)

        AC_MSG_CHECKING(for d_set_d_op function in kernel)
        dnl if this test passes, the kernel does not have it
        dnl if this test fails, the kernel already defined it
        AC_TRY_COMPILE([
                #define __KERNEL__
                #ifdef HAVE_KCONFIG
                #include <linux/kconfig.h>
                #endif
                #include <linux/fs.h>
                loff_t d_set_d_op(struct dentry *dentry, const struct dentry_operations *op)
                {
                        return 0;
                }
        ], [],
                AC_MSG_RESULT(no),
                AC_MSG_RESULT(yes)
                AC_DEFINE(HAVE_D_SET_D_OP, 1, Define if kernel has d_set_d_op),
        )

	dnl Check if the kernel defines the xtvec structure.
	dnl This is part of a POSIX extension.
	AC_MSG_CHECKING(for struct xtvec in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/uio.h>
		static struct xtvec xv = { 0, 0 };
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_STRUCT_XTVEC, 1, Define if struct xtvec is defined in the kernel),
		AC_MSG_RESULT(no)
	)

	dnl 2.6.20 deprecated kmem_cache_t; some old ones do not have struct
	dnl kmem_cache, but may have kmem_cache_s.  It's a mess.  Just look
	dnl for this, and assume _t if not found.
	dnl This test relies on gcc complaining about declaring a struct
	dnl in a parameter list.  Fragile, but nothing better is available
	dnl to check for the existence of a struct.  We cannot see the
	dnl definition of the struct in the kernel, it's private to the
	dnl slab implementation.  And C lets you declare structs freely as
	dnl long as you don't try to deal with their contents.
        tmp_cflags=$CFLAGS
        CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for struct kmem_cache in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/kernel.h>
		#include <linux/slab.h>

		int foo(struct kmem_cache *s)
		{
		    return (s == NULL) ? 3 : 4;
		}
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_STRUCT_KMEM_CACHE, 1, Define if struct kmem_cache is defined in kernel),
		AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

	dnl 2.6.20 removed SLAB_KERNEL.  Need to use GFP_KERNEL instead
	AC_MSG_CHECKING(for SLAB_KERNEL flag in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/slab.h>
		static int flags = SLAB_KERNEL;
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_SLAB_KERNEL, 1, Define if SLAB_KERNEL is defined in kernel),
		AC_MSG_RESULT(no)
	)

	dnl The name of this field changed from memory_backed to capabilities
	dnl in 2.6.12.
	AC_MSG_CHECKING(for memory_backed in struct backing_dev_info in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/mm.h>
		#include <linux/backing-dev.h>
		static struct backing_dev_info bdi = {
		    .memory_backed = 0
		};
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_BDI_MEMORY_BACKED, 1, Define if struct backing_dev_info in kernel has memory_backed),
		AC_MSG_RESULT(no)
	)

	dnl checking if we have a sendfile callback 
	if test "x$enable_kernel_sendfile" = "xyes"; then
		AC_MSG_CHECKING(for sendfile callback in struct file_operations in kernel)
		AC_TRY_COMPILE([
			#define __KERNEL__
            #ifdef HAVE_KCONFIG
            #include <linux/kconfig.h>
            #endif
			#include <linux/fs.h>
			static struct file_operations fop = {
				 .sendfile = NULL,
			};
		], [],
			AC_MSG_RESULT(yes)
			AC_DEFINE(HAVE_SENDFILE_VFS_SUPPORT, 1, Define if struct file_operations in kernel has sendfile callback),
			AC_MSG_RESULT(no)
		)
	fi

	dnl checking if we have a readv callback in super_operations 
	AC_MSG_CHECKING(for readv callback in struct file_operations in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct file_operations fop = {
		    .readv = NULL,
		};
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_READV_FILE_OPERATIONS, 1, Define if struct file_operations in kernel has readv callback),
		AC_MSG_RESULT(no)
	)
	dnl checking if we have a writev callback in super_operations 
	AC_MSG_CHECKING(for writev callback in struct file_operations in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct file_operations fop = {
		    .writev = NULL,
		};
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_WRITEV_FILE_OPERATIONS, 1, Define if struct file_operations in kernel has writev callback),
		AC_MSG_RESULT(no)
	)

	dnl checking if we have a find_inode_handle callback in super_operations 
	AC_MSG_CHECKING(for find_inode_handle callback in struct super_operations in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct super_operations sop = {
		    .find_inode_handle = NULL,
		};
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_FIND_INODE_HANDLE_SUPER_OPERATIONS, 1, Define if struct super_operations in kernel has find_inode_handle callback),
		AC_MSG_RESULT(no)
	)

	dnl 2.6.18.1 removed this member
	AC_MSG_CHECKING(for i_blksize in struct inode)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct inode i = {
			.i_blksize = 0,
			};
		], [],
			AC_MSG_RESULT(yes)
			AC_DEFINE(HAVE_I_BLKSIZE_IN_STRUCT_INODE, 1, Define if struct inode in kernel has i_blksize member),
			AC_MSG_RESULT(no)
	)

	dnl 2.6.16 removed this member
	AC_MSG_CHECKING(for i_sem in struct inode)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct inode i = {
			.i_sem = {0},
			};
		], [],
			AC_MSG_RESULT(yes)
			AC_DEFINE(HAVE_I_SEM_IN_STRUCT_INODE, 1, Define if struct inode in kernel has i_sem member),
			AC_MSG_RESULT(no)
	)

	dnl checking if we have a statfs_lite callback in super_operations 
	AC_MSG_CHECKING(for statfs_lite callback in struct super_operations in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct super_operations sop = {
		    .statfs_lite = NULL,
		};
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_STATFS_LITE_SUPER_OPERATIONS, 1, Define if struct super_operations in kernel has statfs_lite callback),
		AC_MSG_RESULT(no)
	)

	dnl checking if we have a fill_handle callback in inode_operations 
	AC_MSG_CHECKING(for fill_handle callback in struct inode_operations in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct inode_operations iop = {
		    .fill_handle = NULL,
		};
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_FILL_HANDLE_INODE_OPERATIONS, 1, Define if struct inode_operations in kernel has fill_handle callback),
		AC_MSG_RESULT(no)
	)

	dnl checking if we have a getattr_lite callback in inode_operations 
	AC_MSG_CHECKING(for getattr_lite callback in struct inode_operations in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct inode_operations iop = {
		    .getattr_lite = NULL,
		};
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_GETATTR_LITE_INODE_OPERATIONS, 1, Define if struct inode_operations in kernel has getattr_lite callback),
		AC_MSG_RESULT(no)
	)

	dnl checking if we have a get_fs_key callback in super_operations 
	AC_MSG_CHECKING(for get_fs_key callback in struct super_operations in kernel)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct super_operations sop = {
		    .get_fs_key = NULL,
		};
	], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_GET_FS_KEY_SUPER_OPERATIONS, 1, Define if struct super_operations in kernel has get_fs_key callback),
		AC_MSG_RESULT(no)
	)
	
	dnl checking if we have a  readdir callback in file_operations
	AC_MSG_CHECKING(for readdir member in file_operations structure)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
		 ], [
		 struct file_operations filop = {
				.readdir = NULL
		 };
	    ],
	    AC_MSG_RESULT(yes)
		 AC_DEFINE(HAVE_READDIR_FILE_OPERATIONS, 1, Define if struct file_operations in kernel has readdir callback),
	    AC_MSG_RESULT(no)
	    )

	dnl checking if we have a readdirplus callback in file_operations
	AC_MSG_CHECKING(for readdirplus member in file_operations structure)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
		 ], [
		 struct file_operations filop = {
				.readdirplus = NULL
		 };
	    ],
	    AC_MSG_RESULT(yes)
		 AC_DEFINE(HAVE_READDIRPLUS_FILE_OPERATIONS, 1, Define if struct file_operations in kernel has readdirplus callback),
	    AC_MSG_RESULT(no)
	    )

	dnl checking if we have a readdirplus_lite callback in file_operations
	AC_MSG_CHECKING(for readdirplus_lite member in file_operations structure)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
		 ], [
		 struct file_operations filop = {
				.readdirplus_lite = NULL
		 };
	    ],
	    AC_MSG_RESULT(yes)
		 AC_DEFINE(HAVE_READDIRPLUSLITE_FILE_OPERATIONS, 1, Define if struct file_operations in kernel has readdirplus_lite callback),
	    AC_MSG_RESULT(no)
	    )


	dnl checking if we have a readx callback in file_operations
	AC_MSG_CHECKING(for readx member in file_operations structure)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
		 ], [
		 struct file_operations filop = {
				.readx = NULL
		 };
	    ],
	    AC_MSG_RESULT(yes)
		 AC_DEFINE(HAVE_READX_FILE_OPERATIONS, 1, Define if struct file_operations in kernel has readx callback),
	    AC_MSG_RESULT(no)
	    )


	dnl checking if we have a writex callback in file_operations
	AC_MSG_CHECKING(for writex member in file_operations structure)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
		 ], [
		 struct file_operations filop = {
				.writex = NULL
		 };
	    ],
	    AC_MSG_RESULT(yes)
		 AC_DEFINE(HAVE_WRITEX_FILE_OPERATIONS, 1, Define if struct file_operations in kernel has writex callback),
	    AC_MSG_RESULT(no)
	    )

	AC_MSG_CHECKING(for aio support in kernel)
	dnl if this test passes, the kernel has it
	dnl if this test fails, the kernel does not have it
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/wait.h>
		#include <linux/aio.h>
		  static struct kiocb iocb;
		], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_AIO, 1, Define if kernel has aio support)
		have_aio=yes,
		AC_MSG_RESULT(no)
		have_aio=no
	)

	if test "x$have_aio" = "xyes" -a "x$enable_kernel_aio" = "xyes"; then
		AC_MSG_CHECKING(for ki_dtor in kiocb structure of kernel)
		dnl if this test passes, the kernel does have it and we enable
		dnl support for AIO.   if this test fails, the kernel does not
		dnl have this member and we disable support for AIO
		AC_TRY_COMPILE([
			#define __KERNEL__
			#include <linux/wait.h>
			#include <linux/aio.h>
			static struct kiocb io_cb = {
					  .ki_dtor = NULL,
			};
		], [],
			AC_MSG_RESULT(yes)
			AC_DEFINE(HAVE_AIO_VFS_SUPPORT, 1, Define if we are enabling VFS AIO support in kernel),
			AC_MSG_RESULT(no)
		)

		AC_MSG_CHECKING(for kiocbSetCancelled)
		dnl kiocbSetCancelled is gone by 3.11...
		AC_TRY_COMPILE([
			#define __KERNEL__
			#include <linux/wait.h>
			#include <linux/aio.h>
		],
                [
                        struct kiocb *iocb;
                        kiocbSetCancelled(iocb);
                ],
			AC_MSG_RESULT(yes)
			AC_DEFINE(HAVE_KIOCBSETCANCELLED, 1, Define if kiocbSetCancelled exists),
			AC_MSG_RESULT(no)
		)

		AC_MSG_CHECKING(for atomic ki_users)
		dnl ki_users member in struct kiocb is atomic_t (not int)
		dnl in 3.11
	        tmp_cflags=$CFLAGS
	        CFLAGS="$CFLAGS -Werror"
		AC_TRY_COMPILE([
			#define __KERNEL__
			#include <linux/wait.h>
			#include <linux/aio.h>
		],
                [
                        struct kiocb *iocb;
                        atomic_dec(&iocb->ki_users);
                ],
			AC_MSG_RESULT(yes)
			AC_DEFINE(KI_USERS_ATOMIC, 1, Define if ki_users is atomic),
			AC_MSG_RESULT(no)
		)
		tmp_cflags=$CFLAGS

		AC_MSG_CHECKING(for aio_put_req returns int)
		dnl aio_put_req is void by 3.11
		AC_TRY_COMPILE([
			#define __KERNEL__
			#include <linux/wait.h>
			#include <linux/aio.h>
		],
                [
                        struct kiocb *iocb;
                        int r;
                        r = aio_put_req(iocb);
                ],
			AC_MSG_RESULT(yes)
			AC_DEFINE(AIO_PUT_REQ_RETURNS_INT, 1, Define if aio_put_req returns int),
			AC_MSG_RESULT(no)
		)

		AC_MSG_CHECKING(for kiocb_set_cancel_fn)
		dnl by 3.11 there's a function for setting the ki_cancel
		dnl member in a struct of type kiocb.
		AC_TRY_COMPILE([
			#define __KERNEL__
			#include <linux/wait.h>
			#include <linux/aio.h>
		],
                [
                        struct kiocb *iocb;
                        int (*aio_cancel)(struct kiocb *, struct io_event *);
                        kiocb_set_cancel_fn(iocb, aio_cancel);
                ],
			AC_MSG_RESULT(yes)
			AC_DEFINE(HAVE_KIOCB_SET_CANCEL_FN, 1, Define if we have kiocb_set_cancel_fn),
			AC_MSG_RESULT(no)
		)

		tmp_cflags=$CFLAGS
		dnl if this test passes, the signature of aio_read has changed to the new one 
		CFLAGS="$CFLAGS -Werror"
		AC_MSG_CHECKING(for new prototype of aio_read callback of file_operations structure)
		AC_TRY_COMPILE([
			#define __KERNEL__
            #ifdef HAVE_KCONFIG
            #include <linux/kconfig.h>
            #endif
			#include <linux/fs.h>
			extern ssize_t my_aio_read(struct kiocb *, const struct iovec *, unsigned long, loff_t);
			static struct file_operations fop = {
					  .aio_read = my_aio_read,
			};
		], [],
			AC_MSG_RESULT(yes)
			AC_DEFINE(HAVE_AIO_NEW_AIO_SIGNATURE, 1, Define if VFS AIO support in kernel has a new prototype),
			AC_MSG_RESULT(no)
		)
		CFLAGS=$tmp_cflags

	fi

	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for dentry argument in kernel super_operations statfs)
	dnl Rely on the fact that there is an external vfs_statfs that is
	dnl of the same type as the .statfs in struct super_operations to
	dnl verify the signature of that function pointer.  There is a single
	dnl commit in the git history where both changed at the same time
	dnl from super_block to dentry.
	dnl
	dnl The alternative approach of trying to define a s_op.statfs is not
	dnl as nice because that only throws a warning, requiring -Werror to
	dnl catch it.  This is a problem if the compiler happens to spit out
	dnl other spurious warnings that have nothing to do with the test.
	dnl
	dnl If this test passes, the kernel uses a struct dentry argument.
	dnl If this test fails, the kernel uses something else (old struct
	dnl super_block perhaps).
        dnl
        dnl Need to use the second approach because vfs_statfs changes without
        dnl a cooresponding change in statfs in super_operations. I'm not that
        dnl concerned with reliance on Werror since we use it heavily
        dnl throughout these checks
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                struct super_operations sop;
		int s(struct dentry *de, struct kstatfs *kfs)
		{
			return 0;
		}
		], 
                [
                    sop.statfs = s;
                ],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_DENTRY_STATFS_SOP, 1, Define if super_operations statfs has dentry argument),
		AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

	AC_MSG_CHECKING(for vfsmount argument in kernel file_system_type get_sb)
	dnl Same trick as above.  A single commit changed mayn things at once:
	dnl type and signature of file_system_type.get_sb, and signature of
	dnl get_sb_bdev.  This test is a bit more tenuous, as get_sb_bdev
	dnl isn't used directly in a file_system_type, but is a popular helper
	dnl for many FSes.  And it has not exactly the same signature.
	dnl
	dnl If this test passes, the kernel has the most modern known form,
	dnl which includes a stfuct vfsmount argument.
	dnl If this test fails, the kernel uses something else.
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		int get_sb_bdev(struct file_system_type *fs_type, int flags,
				const char *dev_name, void *data,
				int (*fill_super)(struct super_block *, void *,
						  int),
				struct vfsmount *vfsm)
		{
			return 0;
		}
		], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_VFSMOUNT_GETSB, 1, Define if file_system_type get_sb has vfsmount argument),
		AC_MSG_RESULT(no)
	)

	AC_MSG_CHECKING(for get_sb_nodev)
	AC_TRY_COMPILE([
                #define __KERNEL__
                #ifdef HAVE_KCONFIG
                #include <linux/kconfig.h>
                #endif
                #include <linux/fs.h>
                int v_fill_sb(struct super_block *sb, void *data, int s)
                {
                        return 0;
                }
                ],
                [
                        int ret = 0;
                        struct super_block *sb = NULL;
#ifdef HAVE_VFSMOUNT_GETSB
                        ret = get_sb_nodev(NULL, 0, NULL, v_fill_sb, NULL );
#else
                        sb = get_sb_nodev(NULL, 0, NULL, v_fill_sb);
#endif
		], 
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_GETSB_NODEV, 1, Define if get_sb_nodev function exists ),
		AC_MSG_RESULT(no)
	)

	AC_MSG_CHECKING(for file_system_type get_sb)
	AC_TRY_COMPILE([
                #define __KERNEL__
                #ifdef HAVE_KCONFIG
                #include <linux/kconfig.h>
                #endif
                #include <linux/fs.h>
                ],
                [
                    struct file_system_type f;
                    f.get_sb = NULL;
		], 
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_FSTYPE_GET_SB, 1, Define if only filesystem_type has get_sb),
		AC_MSG_RESULT(no)
	)

	AC_MSG_CHECKING(for f_dentry in file struct)
        dnl the define for f_dentry eventually goes missing from files struct.
	AC_TRY_COMPILE([
                #define __KERNEL__
                #ifdef HAVE_KCONFIG
                #include <linux/kconfig.h>
                #endif
                #include <linux/fs.h>
                ],
                [
                    struct file f;
                    f.f_dentry = NULL;
		], 
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_F_DENTRY, 1, Define if file struct has f_dentry),
		AC_MSG_RESULT(no)
	)

	AC_MSG_CHECKING(for file_system_type mount exclusively)
	AC_TRY_COMPILE([
                #define __KERNEL__
                #ifdef HAVE_KCONFIG
                #include <linux/kconfig.h>
                #endif
                #include <linux/fs.h>
                ],
                [
#ifdef HAVE_FSTYPE_GET_SB
                    assert(0);
#else
                    struct file_system_type f;
                    f.mount = NULL;
#endif
		], 
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_FSTYPE_MOUNT_ONLY, 1, Define if only filesystem_type has mount and HAVE_FSTYPE_GET_SB is false),
		AC_MSG_RESULT(no)
	)

	AC_MSG_CHECKING(for xattr support in kernel)
	dnl if this test passes, the kernel has it
	dnl if this test fails, the kernel does not have it
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
			  static struct inode_operations in_op = {
				  .getxattr = NULL
			  };
		], [],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_XATTR, 1, Define if kernel has xattr support)
		have_xattr=yes,
		AC_MSG_RESULT(no)
		have_xattr=no
	)

	if test "x$have_xattr" = "xyes"; then
	   dnl Test to check if setxattr function has a const void * argument
	   AC_MSG_CHECKING(for const argument to setxattr function)
	   dnl if this test passes, there is a const void* argument
	   AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		], 
		[
			struct inode_operations inode_ops;
			int ret;
			struct dentry * dent = NULL;
			const char * name = NULL;
			const void * val = NULL;
			size_t size = 0;
			int flags = 0;

			ret = inode_ops.setxattr(dent, name, val, size, flags);
		],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_SETXATTR_CONST_ARG, 1, Define if kernel setxattr has const void* argument),
		AC_MSG_RESULT(no)
		)
	fi

        dnl the proc handler functions have changed over the years.
        dnl pre-2.6.8: proc_handler(ctl_table       *ctl,
        dnl                         int             write,
        dnl                         struct file     *filp,
        dnl                         void            *buffer,
        dnl                         size_t          *lenp)
        dnl
        dnl 2.6.8-2.6.31: proc_handler(ctl_table       *ctl,
        dnl                            int             write,
        dnl                            struct file     *filp,
        dnl                            void            *buffer,
        dnl                            size_t          *lenp,
        dnl                            loff_t          *ppos)
        dnl > 2.6.31: proc_handler(ctl_table       *ctl,
        dnl                        int             write,
        dnl                        void            *buffer,
        dnl                        size_t          *lenp,
        dnl                        loff_t          *ppos)
 
	dnl Test to see if sysctl proc handlers have a file argument
	AC_MSG_CHECKING(for file argument to sysctl proc handlers)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
	    #include <linux/sysctl.h>
	    ], [
                struct ctl_table * ctl = NULL;
                int write = 0;
                struct file * filp = NULL;
                void __user * buffer = NULL;
                size_t * lenp = NULL;
                loff_t * ppos = NULL;

                proc_dointvec_minmax(ctl, write, filp, buffer, lenp, ppos);
	    ],
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_PROC_HANDLER_FILE_ARG, 1, Define if sysctl proc handlers have 6th argument),
	    AC_MSG_RESULT(no)
	    )

	AC_MSG_CHECKING(for ppos argument to sysctl proc handlers)
	dnl if this test passes, there is a ppos argument
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
	    #include <linux/sysctl.h>
	    ], [
                struct ctl_table * ctl = NULL;
                int write = 0;
                void __user * buffer = NULL;
                size_t * lenp = NULL;
                loff_t * ppos = NULL;

                proc_dointvec_minmax(ctl, write, buffer, lenp, ppos);
	    ],
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_PROC_HANDLER_PPOS_ARG, 1, Define if sysctl proc handlers have ppos argument),
	    AC_MSG_RESULT(no)
	    )


	AC_CHECK_HEADERS([linux/posix_acl.h], [], [], 
		[#define __KERNEL__
		 #ifdef HAVE_KCONFIG
		 #include <linux/kconfig.h>
		 #endif
		 #include <linux/fs.h>
		 #ifdef HAVE_XATTR 
		 #include <linux/xattr.h> 
		 #endif
		 ] )

	AC_CHECK_HEADERS([linux/posix_acl_xattr.h], [], [], 
		[#define __KERNEL__
		 #ifdef HAVE_KCONFIG
		 #include <linux/kconfig.h>
		 #endif
		 #include <linux/fs.h>
		 #ifdef HAVE_XATTR 
		 #include <linux/xattr.h> 
		 #endif
		 ] )

	dnl linux-2.6.11 had xattr_acl.h, but 2.6.12 did not!
	AC_CHECK_HEADERS([linux/xattr_acl.h], [], [], 
		[#define __KERNEL__
		 #ifdef HAVE_KCONFIG
		 #include <linux/kconfig.h>
		 #endif
		 #include <linux/fs.h>
		 #ifdef HAVE_XATTR
		 #include <linux/xattr.h>
		 #endif
		 ] )

	AC_CHECK_HEADERS([linux/mount.h], [], [], 
		[#define __KERNEL__
		 #include <linux/mount.h>
		 ] )
	AC_CHECK_HEADERS([linux/ioctl32.h], [], [], 
		[#define __KERNEL__
		 #include <linux/ioctl32.h>
		 ] )
	AC_CHECK_HEADERS([linux/compat.h], [], [], 
		[#define __KERNEL__
		 #ifdef HAVE_KCONFIG
		 #include <linux/kconfig.h>
		 #endif
		 #include <linux/compat.h>
		 ] )
	AC_CHECK_HEADERS([linux/syscalls.h], [], [], 
		[#define __KERNEL__
		 #ifdef HAVE_KCONFIG
		 #include <linux/kconfig.h>
		 #endif
		 #include <linux/syscalls.h>
		 ] )
	AC_CHECK_HEADERS([asm/ioctl32.h], [], [], 
		[#define __KERNEL__
		 #include <asm/ioctl32.h>
		 ] )
	AC_CHECK_HEADERS([linux/exportfs.h], [],[],
		[#define __KERNEL__
		 #ifdef HAVE_KCONFIG
		 #include <linux/kconfig.h>
		 #endif
		 #include <linux/exportfs.h>
		])

        dnl no bkl, no need for smp_lock.h
        AC_CHECK_HEADER([linux/smp_lock.h], [], [],
                [#define __KERNEL__
                 #include <linux/smp_lock.h>
                ])

	AC_MSG_CHECKING(for generic_file_readv api in kernel)
	dnl if this test passes, the kernel does not have it
	dnl if this test fails, the kernel has it defined with a different
	dnl signature!  deliberately, the signature for this method has been
	dnl changed for it to give a compiler error.

	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		int generic_file_readv(struct inode *inode)
		{
			return 0;
		}
	], [],
		AC_MSG_RESULT(no),
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_GENERIC_FILE_READV, 1, Define if kernel has generic_file_readv),
	)

	AC_MSG_CHECKING(for generic_permission api in kernel)
	dnl if this test passes, the kernel does not have it
	dnl if this test fails, the kernel has it defined with a different
	dnl signature!  deliberately, the signature for this method has been
	dnl changed for it to give a compiler error.

	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		int generic_permission(struct inode *inode)
		{
			return 0;
		}
	], [],
		AC_MSG_RESULT(no),
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_GENERIC_PERMISSION, 1, Define if kernel has generic_permission),
	)

        dnl generic_permission in < 2.6.38 has three parameters
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for three-param generic_permission)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                struct inode *f;
	], 
	[ 
	        generic_permission(f, 0, NULL);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_THREE_PARAM_GENERIC_PERMISSION, 1, [Define if generic_permission takes three parameters]),
	AC_MSG_RESULT(no)
	)

        dnl generic_permission in >= 2.6.38 and 3.0.x has four parameters
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for four-param generic_permission)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                struct inode *f;
	], 
	[ 
	        generic_permission(f, 0, 0, NULL);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_FOUR_PARAM_GENERIC_PERMISSION, 1, [Define if generic_permission takes four parameters]),
	AC_MSG_RESULT(no)
	)

        dnl generic_permission in >= 3.1.x has two parameters
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for two-param generic_permission)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                struct inode *f;
	], 
	[ 
	        generic_permission(f, 0);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_TWO_PARAM_GENERIC_PERMISSION, 1, [Define if generic_permission takes two parameters]),
	AC_MSG_RESULT(no)
	)

        dnl set_nlink is defined in 3.2.x 
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for set_nlink)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		struct inode *i;
	], 
	[
		set_nlink(i, 0);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_I_SET_NLINK, 1, [Define if set_nlink exists]),
	AC_MSG_RESULT(no)
	)

        dnl inc_nlink is defined in 3.2.x 
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for inc_nlink)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		struct inode *i;
	], 
	[
		inc_nlink(i);
	], 
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_I_INC_NLINK, 1, [Define if inc_nlink exists]),
	AC_MSG_RESULT(no)
	)

        dnl drop_nlink is defined in 3.2.x 
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for drop_nlink)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		struct inode *i;
	], 
	[
		drop_nlink(i);
	], 
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_I_DROP_NLINK, 1, [Define if drop_nlink exists]),
	AC_MSG_RESULT(no)
	)

        dnl clear_nlink is defined in 3.2.x 
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for clear_nlink)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		struct inode *i;
	], 
	[
		clear_nlink(i);
	], 
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_I_CLEAR_NLINK, 1, [Define if clear_nlink exists]),
	AC_MSG_RESULT(no)
	)

        dnl check for posix_acl_equiv_mode umode_t type  
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for posix_acl_equiv_mode umode_t)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/posix_acl.h>
		struct posix_acl *acl;
		umode_t mode = 0;
	],
	[
		posix_acl_equiv_mode(acl, &mode);
	], 
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_POSIX_ACL_EQUIV_MODE_UMODE_T, 1, [Define if posix_acl_equiv_mode accepts umode_t type]),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

        dnl check for three arg posix_acl_create
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for three arg posix_acl_create)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/posix_acl.h>
		struct posix_acl *acl;
		umode_t mode = 0;
	],
	[
		posix_acl_create(&acl, GFP_KERNEL, &mode);
	], 
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_POSIX_ACL_CREATE_3, 1, [Define if posix_acl_create has three arguments]),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

        dnl check for four arg posix_acl_create
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for four arg posix_acl_create)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/posix_acl.h>
		struct inode *dir;
		struct posix_acl *default_acl;
		struct posix_acl *acl;
		umode_t mode = 0;
	],
	[
		posix_acl_create(dir, &mode, &default_acl, &acl);
	], 
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_POSIX_ACL_CREATE_4, 1, [Define if posix_acl_create has four arguments]),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

        dnl check for three arg posix_acl_chmod
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for three argument posix_acl_chmod)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/posix_acl.h>
		struct posix_acl *acl;
		struct inode *inode;
		umode_t mode = 0;
	],
	[
		posix_acl_chmod(&acl, GFP_KERNEL, inode->i_mode );
	], 
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_POSIX_ACL_CHMOD_3, 1, [Define if posix_acl_chmod exists and has three arguments]),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

        dnl check for two arg posix_acl_chmod
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for two argument posix_acl_chmod)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/posix_acl.h>
		struct inode *inode;
	],
	[
		posix_acl_chmod(inode, inode->i_mode);
	], 
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_POSIX_ACL_CHMOD_2, 1, [Define if posix_acl_chmod exists and has two arguments]),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

        dnl check for posix_acl_clone
	dnl tmp_cflags=$CFLAGS
	dnl CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for posix_acl_clone)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/posix_acl.h>
		struct posix_acl *acl;
	],
	[
		posix_acl_clone(acl, GFP_KERNEL);
	], 
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_POSIX_ACL_CLONE, 1, [Define if posix_acl_clone exists]),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

        dnl check for fsync with loff_t  
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for fsync with loff_t)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>

		int my_fsync(struct file *, loff_t, loff_t, int);

		int my_fsync(struct file *f, loff_t start, loff_t end, int datasync)
		{
		}
	],
	[
		struct file_operations fop;
		
		fop.fsync = my_fsync;
	], 
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_FSYNC_LOFF_T_PARAMS, 1, [Define if fsync has loff_t params]),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags


	AC_MSG_CHECKING(for generic_getxattr api in kernel)
	dnl if this test passes, the kernel does not have it
	dnl if this test fails, the kernel has it defined
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/xattr.h>
		int generic_getxattr(struct inode *inode)
		{
			return 0;
		}
	], [],
		AC_MSG_RESULT(no),
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_GENERIC_GETXATTR, 1, Define if kernel has generic_getxattr),
	)

	AC_MSG_CHECKING(for arg member in read_descriptor_t in kernel)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
	    ], [
	    read_descriptor_t x;
	    x.arg.data = NULL;
	    ],
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_ARG_IN_READ_DESCRIPTOR_T, 1, Define if read_descriptor_t has an arg member),
	    AC_MSG_RESULT(no)
	)

        AC_MSG_CHECKING(for fh_to_dentry member in export_operations in kernel)
	AC_TRY_COMPILE([
	    #define __KERNEL__
	    #include <linux/exportfs.h>
	    ], [
	    struct export_operations x;
	    x.fh_to_dentry = NULL;
	    ],
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_FHTODENTRY_EXPORT_OPERATIONS, 1, Define if export_operations has an fh_to_dentry member),
	    AC_MSG_RESULT(no)
	)

        AC_MSG_CHECKING(for encode_fh member in export_operations in kernel)
	AC_TRY_COMPILE([
	    #define __KERNEL__
	    #include <linux/exportfs.h>
	    ], [
	    struct export_operations x;
	    x.encode_fh = NULL;
	    ],
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_ENCODEFH_EXPORT_OPERATIONS, 1, Define if export_operations has an encode_fh member),
	    AC_MSG_RESULT(no)
	)

        dnl between 3.4 and 3.6 the encode_fh function in
        dnl "struct export_operations" stopped having a dentry pointer
        dnl and a connectable flag as arguments, intead encode_fh
        dnl has both the child and parent inodes as arguments.
	tmp_cflags=${CFLAGS}
	CFLAGS="${CFLAGS} -Werror"
        AC_MSG_CHECKING([if kernel export ops get inode from dentry])
        AC_TRY_COMPILE([
            #define __KERNEL__
            #ifdef HAVE_KCONFIG
            #include <linux/kconfig.h>
            #endif
            #include <linux/fs.h>
            #include <linux/exportfs.h>
            extern int myencode(struct dentry *,
                                __u32 *,
                                int *,
                                int);
            ], [
            static struct export_operations ex_op = {.encode_fh = myencode};
            ], [
            AC_MSG_RESULT(yes)
            AC_DEFINE(PVFS_ENCODE_FS_USES_DENTRY, 1,
               [Define if kernel export ops encode_fh has dentry arg])
            ], [
            AC_MSG_RESULT(no)
            ]
        )
	CFLAGS=$tmp_cflags

	dnl Using -Werror is not an option, because some arches throw lots of
	dnl warnings that would trigger false negatives.  We know that the
	dnl change to the releasepage() function signature was accompanied by
	dnl a similar change to the exported function try_to_release_page(),
	dnl and that one we can check without using -Werror.  The test fails
	dnl unless the previous declaration was identical to the one we suggest
	dnl below.  New kernels use gfp_t, not int.
	AC_MSG_CHECKING(for second arg type int in address_space_operations releasepage)
	AC_TRY_COMPILE([
	    #define __KERNEL__
	    #ifdef HAVE_KCONFIG
	    #include <linux/kconfig.h>
	    #endif
	    #include <linux/buffer_head.h>
	    extern int try_to_release_page(struct page *page, int gfp_mask);
	    ], [],
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_INT_ARG2_ADDRESS_SPACE_OPERATIONS_RELEASEPAGE, 1, Define if sceond argument to releasepage in address_space_operations is type int),
	    AC_MSG_RESULT(no)
	)

	dnl Similar logic for the follow_link member in inode_operations.  New
	dnl kernels return a void *, not int.
	AC_MSG_CHECKING(for int return in inode_operations follow_link)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
	    extern int page_follow_link_light(struct dentry *,
	                                      struct nameidata *);
	    ], [],
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_INT_RETURN_INODE_OPERATIONS_FOLLOW_LINK, 1, Define if return value from follow_link in inode_operations is type int),
	    AC_MSG_RESULT(no)
	)

	dnl kmem_cache_destroy function may return int only on pre 2.6.19 kernels
	dnl else it returns a void.
	AC_MSG_CHECKING(for int return in kmem_cache_destroy)
	AC_TRY_COMPILE([
	    #define __KERNEL__
	    #ifdef HAVE_KCONFIG
	    #include <linux/kconfig.h>
	    #endif
	    #include <linux/slab.h>
	    extern int kmem_cache_destroy(kmem_cache_t *);
	    ], [],
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_INT_RETURN_KMEM_CACHE_DESTROY, 1, Define if return value from kmem_cache_destroy is type int),
	    AC_MSG_RESULT(no)
	)

	dnl more 2.6 api changes.  return type for the invalidatepage
	dnl address_space_operation is 'void' in new kernels but 'int' in old
	dnl I had to turn on -Werror for this test because i'm not sure how
	dnl else to make dnl "initialization from incompatible pointer type"
	dnl fail.  
	AC_MSG_CHECKING(for older int return in invalidatepage)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		], 
                [
			struct address_space_operations aso;

			int ret;
			struct page * page = NULL;
			unsigned long offset;

			ret = aso.invalidatepage(page, offset);
		],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_INT_RETURN_ADDRESS_SPACE_OPERATIONS_INVALIDATEPAGE, 1, Define if return type of invalidatepage should be int),
		AC_MSG_RESULT(NO)
		)

	dnl by 3.11 the invalidatepage address_space_operation has three
	dnl has three arguments.
	AC_MSG_CHECKING(for three argument invalidatepage function)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		], 
                [
			struct address_space_operations aso;

			struct page *p;
			unsigned int i,j;

			aso.invalidatepage(p,i,j);
		],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_THREE_ARGUMENT_INVALIDATEPAGE, 1, Define if invalidatepage function has three arguments),
		AC_MSG_RESULT(NO)
		)

	dnl In 2.6.18.1 and newer, including <linux/config.h> will throw off a
	dnl warning 
	tmp_cflags=${CFLAGS}
	CFLAGS="${CFLAGS} -Werror"
	AC_MSG_CHECKING(for warnings when including linux/config.h)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/config.h>
		], [], 
		AC_MSG_RESULT(no)
		AC_DEFINE(HAVE_NOWARNINGS_WHEN_INCLUDING_LINUX_CONFIG_H, 1, Define if including linux/config.h gives no warnings),
		AC_MSG_RESULT(yes)
	)
	CFLAGS=$tmp_cflags

	AC_MSG_CHECKING(for compat_ioctl member in file_operations structure)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
		 ], [
		 struct file_operations filop = {
				.compat_ioctl = NULL
		 };
	    ],
	    AC_MSG_RESULT(yes)
		 AC_DEFINE(HAVE_COMPAT_IOCTL_HANDLER, 1, Define if there exists a compat_ioctl member in file_operations),
	    AC_MSG_RESULT(no)
	    )

	dnl Gives wrong answer if header is missing; don't try then.
	if test x$ac_cv_header_linux_ioctl32_h = xyes ; then
	AC_MSG_CHECKING(for register_ioctl32_conversion kernel exports)
	dnl if this test passes, the kernel does not have it
	dnl if this test fails, the kernel has it defined
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/kernel.h>
		#include <linux/ioctl32.h>
		int register_ioctl32_conversion(void)
		{
			return 0;
		}
	], [],
		AC_MSG_RESULT(no),
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_REGISTER_IOCTL32_CONVERSION, 1, Define if kernel has register_ioctl32_conversion),
	)
	fi

	AC_MSG_CHECKING(for int return value of kmem_cache_destroy)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/slab.h>
		], [
		int i = kmem_cache_destroy(NULL);
		],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_KMEM_CACHE_DESTROY_INT_RETURN, 1, Define if kmem_cache_destroy returns int),
		AC_MSG_RESULT(no)
	)

	dnl As of 2.6.19, combined readv/writev into aio_read and aio_write
	dnl functions.  Detect this by not finding a readv member.
	AC_MSG_CHECKING(for combined file_operations readv and aio_read)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
		 ], [
		 struct file_operations filop = {
			.readv = NULL
		 };
	    ],
	    AC_MSG_RESULT(no),
	    AC_MSG_RESULT(yes)
	    AC_DEFINE(HAVE_COMBINED_AIO_AND_VECTOR, 1, Define if struct file_operations has combined aio_read and readv functions),
	    )

	dnl Check for write_iter
	AC_MSG_CHECKING(for write_iter in file_operations)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
			#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		], [
		struct file_operations filop = {
			.write_iter = NULL
		};
		],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_WRITE_ITER, 1, file_operations has write_iter),
		AC_MSG_RESULT(no)
		)

	dnl Check for copy_from_iter
	AC_MSG_CHECKING(for iov_iter interface support)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/uio.h>
		#ifdef HAVE_KCONFIG
			#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		],
		[
			void *addr;
			size_t bytes;
			struct iov_iter i;
			size_t rc;

			rc = copy_from_iter(addr, bytes, &i);
		],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_IOV_ITER, 1, iov_iter interface is supported),
		AC_MSG_RESULT(no)
		)

	dnl Check for nd_set_link
	AC_MSG_CHECKING(for nd_set_link)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
			#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/namei.h>
		], [
		struct nameidata *nd;
		char *target;

		nd_set_link(nd, target);
		],
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_ND_SET_LINK, 1, nd_set_link is a function),
		AC_MSG_RESULT(no)
		)

	dnl Check for generic_write_checks flavor
	AC_MSG_CHECKING(for generic_write_checks version)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
			#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		], [
		struct kiocb *iocb;
		struct iov_iter *iter;

		generic_write_checks(iocb, iter);
		],
		AC_MSG_RESULT(yes)
		AC_DEFINE(GWC_USES_KIOCB, 1, generic_write_checks with kiocb),
		AC_MSG_RESULT(no)
		)


	dnl Check for kzalloc
	AC_MSG_CHECKING(for kzalloc)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/slab.h>
	], [
		void * a;
		a = kzalloc(1024, GFP_KERNEL);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_KZALLOC, 1, Define if kzalloc exists),
	AC_MSG_RESULT(no)
	)

	dnl Check for two arg register_sysctl_table()
	AC_MSG_CHECKING(for two arguments to register_sysctl_table)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/sysctl.h>
		#include <linux/proc_fs.h>
	], [
		register_sysctl_table(NULL, 0);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_TWO_ARG_REGISTER_SYSCTL_TABLE, 1, Define if register_sysctl_table takes two arguments),
	AC_MSG_RESULT(no)
	)

	dnl FS_IOC_GETFLAGS and FS_IOC_SETFLAGS appeared 
	dnl somewhere around 2.6.20.1 as generic versions of fs-specific flags
	AC_MSG_CHECKING(for generic FS_IOC ioctl flags)
	AC_TRY_COMPILE([
	    #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
	    #include <linux/fs.h>
	], [
	    int flags = FS_IOC_GETFLAGS;
	],
	AC_MSG_RESULT(yes),
	AC_DEFINE(HAVE_NO_FS_IOC_FLAGS, 1, Define if FS_IOC flags missing from fs.h)
	AC_MSG_RESULT(no)
	)

	dnl old linux kernels define struct page with a 'count' member, whereas
	dnl other kernels (since at least 2.6.20) define struct page with a
	dnl '_count'
	AC_MSG_CHECKING(for obsolete struct page count without underscore)
	AC_TRY_COMPILE([
	    #define __KERNEL__
	    #ifdef HAVE_KCONFIG
	    #include <linux/kconfig.h>
	    #endif
	    #include <linux/mm.h>
	], [
	    struct page *p;
	    int foo;
	    foo = atomic_read(&(p)->count);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_OBSOLETE_STRUCT_PAGE_COUNT_NO_UNDERSCORE, 1, Define if struct page defines a count member without leading underscore),
	AC_MSG_RESULT(no)
	)

	dnl old linux kernels do not have class_create and related functions
        dnl
        dnl check for class_device_destroy() to weed out RHEL4 kernels that
        dnl have some class functions but not others
	AC_MSG_CHECKING(if kernel has device classes)
	AC_TRY_COMPILE([
	    #define __KERNEL__
	    #include <linux/device.h>
	], [
	    class_device_destroy(NULL, "pvfs2")
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_KERNEL_DEVICE_CLASSES, 1, Define if kernel has device classes),
	AC_MSG_RESULT(no)
	)

	dnl 2.6.23 removed the destructor parameter from kmem_cache_create
	AC_MSG_CHECKING(for destructor param to kmem_cache_create)
	AC_TRY_COMPILE([
	    #define __KERNEL__
	    #ifdef HAVE_KCONFIG
	    #include <linux/kconfig.h>
	    #endif
	    #include <linux/slab.h>
	], [
	   kmem_cache_create("config-test", 0, 0, 0, NULL, NULL);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_KMEM_CACHE_CREATE_DESTRUCTOR_PARAM, 1, [Define if kernel kmem_cache_create has destructor param]),
	AC_MSG_RESULT(no)
	)

        dnl 2.6.27 changed the constructor parameter signature of
	dnl kmem_cache_create.  Check for this newer one-param style
        dnl If they don't match, gcc complains about
	dnl passing argument ... from incompatible pointer type, hence the
	dnl need for the -Werror.  Note that the next configure test will
        dnl determine if we have a two param constructor or not.
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for one-param kmem_cache_create constructor)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/kernel.h>
		#include <linux/slab.h>
		void ctor(void *req)
		{
		}
	], [
		kmem_cache_create("config-test", 0, 0, 0, ctor);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_KMEM_CACHE_CREATE_CTOR_ONE_PARAM, 1, [Define if kernel kmem_cache_create constructor has newer-style one-parameter form]),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for two param permission)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/kernel.h>
		#include <linux/slab.h>
		#include <linux/fs.h>
		#include <linux/namei.h>
		int ctor(struct inode *i, int a)
		{
			return 0;
		}
		struct inode_operations iop = {
			.permission = ctor,
		};
	], [
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_TWO_PARAM_PERMISSION, 1, [Define if kernel's inode_operations has two parameters permission function]),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

        dnl 2.6.24 changed the constructor parameter signature of
	dnl kmem_cache_create.  Check for this newer two-param style and
	dnl if not, assume it is old.  Note we can get away with just
	dnl struct kmem_cache (and not kmem_cache_t) as that change happened
	dnl in older kernels.  If they don't match, gcc complains about
	dnl passing argument ... from incompatible pointer type, hence the
	dnl need for the -Werror.
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for two-param kmem_cache_create constructor)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/kernel.h>
		#include <linux/slab.h>
		void ctor(struct kmem_cache *cachep, void *req)
		{
		}
	], [
		kmem_cache_create("config-test", 0, 0, 0, ctor);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_KMEM_CACHE_CREATE_CTOR_TWO_PARAM, 1, [Define if kernel kmem_cache_create constructor has new-style two-parameter form]),
	AC_MSG_RESULT(no)
	)
	CFLAGS=$tmp_cflags

	AC_MSG_CHECKING(if kernel address_space struct has a spin_lock field named page_lock)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
	], [
		struct address_space as;
		spin_lock(&as.page_lock);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_SPIN_LOCK_PAGE_ADDR_SPACE_STRUCT, 1, [Define if kernel address_space struct has a spin_lock member named page_lock instead of rw_lock]),
	AC_MSG_RESULT(no)
	)

        tmp_cflags=$CFLAGS
        CFLAGS="$CFLAGS -Werror"
        AC_MSG_CHECKING(if kernel address_space struct has a rwlock_t field named tree_lock)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
	], [
		struct address_space as;
		read_lock(&as.tree_lock);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_RW_LOCK_TREE_ADDR_SPACE_STRUCT, 1, [Define if kernel address_space struct has a rw_lock_t member named tree_lock]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        tmp_cflags=$CFLAGS
        CFLAGS="$CFLAGS -Werror"
        AC_MSG_CHECKING(if kernel address_space struct has a spinlock_t field named tree_lock)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
	], [
		struct address_space as;
		spin_lock(&as.tree_lock);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_SPIN_LOCK_TREE_ADDR_SPACE_STRUCT, 1, [Define if kernel address_space struct has a spin_lock_t member named tree_lock]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

	AC_MSG_CHECKING(if kernel address_space struct has a priv_lock field - from RT linux)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
	], [
		struct address_space as;
		spin_lock(&as.priv_lock);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_RT_PRIV_LOCK_ADDR_SPACE_STRUCT, 1, [Define if kernel address_space struct has a spin_lock for private data instead of rw_lock -- used by RT linux]),
	AC_MSG_RESULT(no)
	)

	AC_MSG_CHECKING(if kernel defines mapping_nrpages macro - from RT linux)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
	], [
		struct address_space idata;
		int i = mapping_nrpages(&idata);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_MAPPING_NRPAGES_MACRO, 1, [Define if kernel defines mapping_nrpages macro -- defined by RT linux]),
	AC_MSG_RESULT(no)
	)

	dnl Starting with 2.6.25-rc1, .read_inode goes away.
	AC_MSG_CHECKING(if kernel super_operations contains read_inode field)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
	], [
		struct super_operations sops;
		sops.read_inode(NULL);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_READ_INODE, 1, [Define if kernel super_operations contains read_inode field]),
	AC_MSG_RESULT(no)
	)

	dnl Starting with 2.6.26, drop_inode and put_inode go away
	AC_MSG_CHECKING(if kernel super_operations contains drop_inode field)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
	], [
		struct super_operations sops;
		sops.drop_inode(NULL);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_DROP_INODE, 1, [Define if kernel super_operations contains drop_inode field]),
	AC_MSG_RESULT(no)
	)

	dnl Starting with 2.6.26, drop_inode and put_inode go away
	AC_MSG_CHECKING(if kernel super_operations contains put_inode field)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
	], [
		struct super_operations sops;
		sops.put_inode(NULL);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_PUT_INODE, 1, [Define if kernel super_operations contains put_inode field]),
	AC_MSG_RESULT(no)
	)

	dnl older 2.6 kernels don't have MNT_NOATIME
	AC_MSG_CHECKING(if mount.h defines MNT_NOATIME)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/mount.h>
	], [
		int flag = MNT_NOATIME;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_MNT_NOATIME, 1, [Define if mount.h contains
	MNT_NOATIME flags]),
	AC_MSG_RESULT(no)
	)

	dnl older 2.6 kernels don't have MNT_NODIRATIME
	AC_MSG_CHECKING(if mount.h defines MNT_NODIRATIME)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/mount.h>
	], [
		int flag = MNT_NODIRATIME;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_MNT_NODIRATIME, 1, [Define if mount.h contains
	MNT_NODIRATIME flags]),
	AC_MSG_RESULT(no)
	)

        dnl newer 2.6 kernels (2.6.28) use d_obtain_alias instead of d_alloc_anon
        AC_MSG_CHECKING(for d_alloc_anon)
        AC_TRY_COMPILE([
                #define __KERNEL__
                #ifdef HAVE_KCONFIG
                #include <linux/kconfig.h>
                #endif
                #include <linux/dcache.h>
        ], [
                struct inode *i;
                d_alloc_anon(i);
        ],
        AC_MSG_RESULT(yes)
        AC_DEFINE(HAVE_D_ALLOC_ANON, 1, [Define if dcache.h contains 
                  d_alloc_annon]),
        AC_MSG_RESULT(no)
        )

        AC_MSG_CHECKING(for s_dirty in struct super_block)
        AC_TRY_COMPILE([
                #define __KERNEL__
                #ifdef HAVE_KCONFIG
                #include <linux/kconfig.h>
                #endif
                #include <linux/fs.h>
        ], [
                struct super_block *s;
                list_empty(&s->s_dirty);
        ],
        AC_MSG_RESULT(yes)
        AC_DEFINE(HAVE_SB_DIRTY_LIST, 1, [Define if struct super_block has s_dirty list]),
        AC_MSG_RESULT(no)
        )

        dnl newer 2.6 kernels (2.6.29-ish) use current_fsuid() macro instead
        dnl of accessing task struct fields directly
        tmp_cflags=$CFLAGS
        CFLAGS="$CFLAGS -Werror"
        AC_MSG_CHECKING(for current_fsuid)
        AC_TRY_COMPILE([
                #define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
                #include <linux/sched.h>
                #include <linux/cred.h>
        ], [
                int uid = current_fsuid();
        ],
        AC_MSG_RESULT(yes)
        AC_DEFINE(HAVE_CURRENT_FSUID, 1, [Define if cred.h contains current_fsuid]),
        AC_MSG_RESULT(no)
        )
        CFLAGS=$tmp_cflags

        dnl By 3.6, the kernel is focusing on the concept of "namespace",
        dnl and that has to be handled when peering at uids and gids.
        dnl We'll check for from_kuid and if we find it, we'll assume we
        dnl have to handle namespace whenever we mess with a kuid_t.
        tmp_cflags=$CFLAGS
        CFLAGS="$CFLAGS -Werror"
        AC_MSG_CHECKING(for from_kuid)
        AC_TRY_COMPILE([
                #define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
                #include <linux/sched.h>
                #include <linux/cred.h>
        ], [
                int uid = from_kuid(&init_user_ns, current_fsuid());
        ],
        AC_MSG_RESULT(yes)
        AC_DEFINE(HAVE_FROM_KUID, 1, [Define if from_kuid function is found]),
        AC_MSG_RESULT(no)
        )
        CFLAGS=$tmp_cflags

        dnl 2.6.32 added a mandatory name field to the bdi structure
        AC_MSG_CHECKING(if kernel backing_dev_info struct has a name field)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/backing-dev.h>
	], [
                struct backing_dev_info foo = 
                {
                    .name = "foo"
                };
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_BACKING_DEV_INFO_NAME, 1, [Define if kernel backing_dev_info struct has a name field]),
	AC_MSG_RESULT(no)
	)

        dnl some 2.6 kernels have functions to explicitly initialize bdi structs
        tmp_cflags=$CFLAGS
        CFLAGS="$CFLAGS -Werror"
        AC_MSG_CHECKING(for bdi_init)
        AC_TRY_COMPILE([
                #define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/backing-dev.h>
        ], [
                int ret = bdi_init(NULL);
        ],
        AC_MSG_RESULT(yes)
        AC_DEFINE(HAVE_BDI_INIT, 1, [Define if bdi_init function is present]),
        AC_MSG_RESULT(no)
        )
        CFLAGS=$tmp_cflags


	dnl 2.6.33 API change,
	dnl Removed .ctl_name from struct ctl_table.
        tmp_cflags=$CFLAGS
        CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING([whether struct ctl_table has ctl_name])
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/sysctl.h>
                static struct ctl_table c = { .ctl_name = 0, };
	],[ ],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_CTL_NAME, 1, Define if struct ctl_table has ctl_name member),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

	dnl Removed .strategy from struct ctl_table.
        tmp_cflags=$CFLAGS
        CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING([whether struct ctl_table has strategy])
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/sysctl.h>
                static struct ctl_table c = { .strategy = 0, };
	], [ ],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_STRATEGY_NAME, 1, Define if struct ctl_table has strategy member),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

	dnl 2.6.33 changed the parameter signature of xattr_handler get 
	dnl member functions to have a fifth argument and changed the first
	dnl parameter from struct inode to struct dentry. if the test fails
	dnl assume the old 4 param with struct inode
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for xattr_handler.get with dentry, char, void, size_t and int)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/dcache.h>
		#include <linux/xattr.h>
		static struct xattr_handler x;
		static int get_xattr_h( struct dentry *d, const char *n, 
					void *b, size_t s, int h)
		{ return 0; }
	], 
	[ 
	    x.get = get_xattr_h;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_XATTR_HANDLER_GET_2_6_33, 1, [Define if kernel xattr_handle get function args are dentry, char, void, size_t, int]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl 4.4 has changed some xattr_handler args again...
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for xattr_handler.get with xattr_handler, dentry, char, void, size_t)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/dcache.h>
		#include <linux/xattr.h>
		static struct xattr_handler x;
		static int get_xattr_h(const struct xattr_handler *handler,
                                      struct dentry *dentry,
                                      const char *name,
                                      void *buffer,
                                      size_t size)
		{ return 0; }
	], 
	[ 
	    x.get = get_xattr_h;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_XATTR_HANDLER_GET_4_4, 1, [Define if kernel xattr_handle get function args are xattr_handler, dentry, char, void and size_t]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

	dnl 2.6.33 changed the parameter signature of xattr_handler set 
	dnl member functions to have a sixth argument and changed the first
	dnl parameter from struct inode to struct dentry. if the test fails
	dnl assume the old 5 param with struct inode
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for xattr_handler.set with dentry, char, void, size_t, int, int)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/dcache.h>
		#include <linux/xattr.h>
		static struct xattr_handler x;
		static int set_xattr_h( struct dentry *d, const char *n, 
					const void *b, size_t s, int f, int h)
		{ return 0; }
	], 
	[ 
	    x.set = set_xattr_h;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_XATTR_HANDLER_SET_2_6_33, 1, [Define if kernel xattr_handle set function args are dentry, char, void, size_t, int, int]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl 4.4 has changed some xattr_handler args again...
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for xattr_handler.set with xattr_handler, dentry, char, void, size_t, int)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/dcache.h>
		#include <linux/xattr.h>
		static struct xattr_handler x;
		static int set_xattr_h(const struct xattr_handler *handler,
                                       struct dentry *dentry,
                                       const char *name,
                                       const void *buffer,
                                       size_t size,
                                       int flags)
		{ return 0; }
	], 
	[ 
	    x.set = set_xattr_h;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_XATTR_HANDLER_SET_4_4, 1, [Define if kernel xattr_handle set function args are xattr_handler, dentry, char, void, size_t, int]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

	dnl xattr_handler is also a const
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for const s_xattr member in super_block struct)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#ifdef HAVE_KCONFIG
		#include <linux/kconfig.h>
		#endif
		#include <linux/fs.h>
		#include <linux/xattr.h>
		struct super_block sb;
                const struct xattr_handler *x[] = { NULL };
	], 
	[ 
            sb.s_xattr = x;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_CONST_S_XATTR_IN_SUPERBLOCK, 1, [Define if s_xattr member of super_block struct is const]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl early 2.6 kernels do not contain true/false enum in stddef.h
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(stddef.h true/false enum)
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/stddef.h>
                int f = true;
	], 
	[ ],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_TRUE_FALSE_ENUM, 1, [Define if kernel stddef has true/false enum]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags


	dnl fsync no longer has a dentry second parameter
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for dentry argument in fsync)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct file_operations f;
		static int local_fsync(struct file *f, struct dentry *d, int i)
		{ return 0; }
	], 
	[ 
	    f.fsync = local_fsync;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_FSYNC_DENTRY_PARAM, 1, [Define if fsync function in file_operations struct wants a dentry pointer as the second parameter]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

	dnl file_operations has unlocked_ioctl instead of ioctl as of 2.6.36
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for unlocked_ioctl in file_operations)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
		static struct file_operations f;
	], 
	[ 
	    f.unlocked_ioctl = NULL;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_UNLOCKED_IOCTL_HANDLER, 1, [Define if file_operations struct has unlocked_ioctl member]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

	dnl 2.6.36 removed inode_setattr with the other BKL removal changes
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for inode_setattr)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                struct iattr *iattr;
                struct inode *inode;
                int ret;
	], 
	[ 
	        ret = inode_setattr(inode, iattr);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_INODE_SETATTR, 1, [Define if inode_setattr is defined]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl dentry operations struct d_hash function has a different signature
        dnl in 2.6.38 and newer, second param is an inode
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for three-param dentry_operations.d_hash)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                #include <linux/dcache.h>
                static struct dentry_operations d;
                static int d_hash_t(const struct dentry *d, 
                                    const struct inode *i, 
                                    struct qstr * q)
                { return 0; }
	], 
	[ 
                d.d_hash = d_hash_t;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_THREE_PARAM_D_HASH, 1, [Define if d_hash member of dentry_operations has three params, the second inode paramsbeing the difference]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl in 3.11 dentry operations struct d_hash function went back to just
        dnl having 2 parameters, similar to the way is was back in 2.6,
        dnl only the first parameter is "const struct dentry *" instead of
        dnl "struct dentry *"... 
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for two-param dentry_operations.d_hash with const)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                #include <linux/dcache.h>
                static struct dentry_operations d;
                static int d_hash_t(const struct dentry *d, 
                                    struct qstr * q)
                { return 0; }
	], 
	[ 
                d.d_hash = d_hash_t;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_TWO_PARAM_D_HASH_WITH_CONST, 1, [Define if d_hash member of dentry_operations has two params, where the first param is a const ]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl dentry operations struct d_compare function has a different 
        dnl signature in 2.6.38 and newer, split out dentry/inodes, string and
        dnl qstr params
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for seven-param dentry_operations.d_compare)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                #include <linux/dcache.h>
                static struct dentry_operations d;
                static int d_compare_t(const struct dentry *d1, 
                                       const struct inode *i1,
                                       const struct dentry *d2, 
                                       const struct inode *i2, 
                                       unsigned int len, 
                                       const char *str, 
                                       const struct qstr *qstr)
                { return 0; }
	], 
	[ 
                d.d_compare = d_compare_t;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_SEVEN_PARAM_D_COMPARE, 1, [Define if d_compare member of dentry_operations has seven params]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl dentry operations struct d_compare function has five parameters
        dnl in 3.11
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for five-param dentry_operations.d_compare)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                #include <linux/dcache.h>
                static struct dentry_operations d;
                static int d_compare_t(const struct dentry *d1, 
                                       const struct dentry *d2, 
                                       unsigned int len, 
                                       const char *str, 
                                       const struct qstr *qstr)
                { return 0; }
	], 
	[ 
                d.d_compare = d_compare_t;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_FIVE_PARAM_D_COMPARE, 1, [Define if d_compare member of dentry_operations has five params]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl dentry operations struct d_delete argumentis constified in  
        dnl 2.6.38 and newer
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for constified dentry_operations.d_delete)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                #include <linux/dcache.h>
                static struct dentry_operations d;
                static int d_delete_t(const struct dentry *d)
                { return 0; }
	], 
	[ 
                d.d_delete = d_delete_t;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_D_DELETE_CONST, 1, [Define if d_delete member of dentry_operations has a const dentry param]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl dentry member d_count is no longer atomic and has it's own spinlock
        dnl in 2.6.38 and newer
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for dentry.d_count atomic_t type)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                #include <linux/dcache.h>
                struct dentry d;
                atomic_t x;
	], 
	[ 
                x = d.d_count;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_DENTRY_D_COUNT_ATOMIC, 1, [Define if d_count member of dentry is of type atomic_t]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl in 3.11 struct dentry no longer has a d_count member,
        dnl the ref count is in its own structure, and that structure
        dnl (struct lockref d_lockref) contains the ref count.
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for dentry with lockref struct)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                #include <linux/dcache.h>
                struct dentry d;
                unsigned int x;
	], 
	[ 
                x = d.d_lockref.count
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_DENTRY_LOCKREF_STRUCT, 1, [Define if dentry struct has a lockref struct member]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags


        dnl in 3.11 and up, a d_count() function is provided that returns the value
        dnl of d_lockref.count.  In SLES 11-SP3, the new structure is being used (struct lockref d_lockref)
        dnl but the function d_count() is not in their version of Linux (3.0.101-0.35-default), instead
        dnl there is a #define d_count d_lockref.count.
        tmp_cflags=$CFLAGS
        CFLAGS="$CFLAGS -Werror"
        AC_MSG_CHECKING(for function d_count)
        AC_TRY_COMPILE([
                #define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
                #include <linux/fs.h>
                #include <linux/dcache.h>
                struct dentry d;
                unsigned int x;
        ],
        [
                x = d_count(d);
        ],
        AC_MSG_RESULT(yes)
        AC_DEFINE(HAVE_D_COUNT_FUNCTION, 1, [define if d_count() is provided]),
        AC_MSG_RESULT(no)
        )
        CFLAGS=$tmp_cflags 

        dnl direct_IO arguments changed several times between 2.6
        dnl and 4.7.
        dnl
        dnl commit d8d3d94 ditched the iov and nr_segs arguments in
        dnl favor of iter.
        dnl
        dnl commit 22c6186 removed rw. Fedora was like this at 4.1.6-201.
        dnl
        dnl commit c8b8e32 got rid of the offset argument.
        dnl
        tmp_cflags=$CFLAGS
        CFLAGS="$CFLAGS -Werror"
        AC_MSG_CHECKING(for commit 22c6186 flavored direct_IO)
        AC_TRY_COMPILE([
          #define __KERNEL__
          #ifdef HAVE_KCONFIG
          #include <linux/kconfig.h>
          #endif
          #include <linux/fs.h>
          struct address_space_operations a;
          ssize_t d(struct kiocb *a, struct iov_iter *b, loff_t c)
          { return 0; }
        ],
        [
          a.direct_IO = d;
        ],
        AC_MSG_RESULT(yes)
        AC_DEFINE(C_22c6186_FLAVORED_DIO, 1, [commit 22c6186 flavored direct_IO]),
        AC_MSG_RESULT(no)
        )
        CFLAGS=$tmp_cflags

        dnl permission function pointer in the inode_operations struct now
        dnl takes three params with the third being an unsigned int (circa
        dnl 2.6.38
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for three-param inode_operations permission)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                struct inode_operations i;
                int p(struct inode *i, int mode, unsigned int flags)
                { return 0; }
	], 
	[ 
            i.permission = p;
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_THREE_PARAM_PERMISSION_WITH_FLAG, 1, [Define if permission function pointer of inode_operations struct has three parameters and the third parameter is for flags (unsigned int)]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl the acl_check parameter of the generic_permission function has a
        dnl third parameter circa 2.6.38
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for three-param acl_check of generic_permission)
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                struct inode *i;
                int p(struct inode *i, int mode, unsigned int flags)
                { return 0; }
	], 
	[ 
            generic_permission(i, 0, 0, p);
	],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_THREE_PARAM_ACL_CHECK, 1, [Define if acl_check param of generic_permission function has three parameters]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl SPIN_LOCK_UNLOCKED has gone away in 2.6.39 in lieu of 
        dnl DEFINE_SPINLOCK()
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for SPIN_LOCK_UNLOCKED )
	AC_TRY_COMPILE([
		#define __KERNEL__
		#include <linux/spinlock.h>
                spinlock_t test_lock = SPIN_LOCK_UNLOCKED;
                struct inode *i;
	], [ ],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_SPIN_LOCK_UNLOCKED, 1, [Define if SPIN_LOCK_UNLOCKED defined]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

        dnl get_sb goes away in 2.6.39 for mount_X
	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for get_sb )
	AC_TRY_COMPILE([
		#define __KERNEL__
        #ifdef HAVE_KCONFIG
        #include <linux/kconfig.h>
        #endif
		#include <linux/fs.h>
                struct file_system_type f;
	], 
        [
                f.get_sb = NULL;
        ],
	AC_MSG_RESULT(yes)
	AC_DEFINE(HAVE_GET_SB_MEMBER_FILE_SYSTEM_TYPE, 1, [Define if get_sb is a member of file_system_type struct]),
	AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

	tmp_cflags=$CFLAGS
	CFLAGS="$CFLAGS -Werror"
	AC_MSG_CHECKING(for dirty_inode flag)
	AC_TRY_COMPILE([
                #define __KERNEL__
                #ifdef HAVE_KCONFIG
                #include <linux/kconfig.h>
                #endif
                #include <linux/fs.h>
                void di(struct inode *i, int f)
                {
                        return;
                }
                ],
                [
                        struct super_operations s;
                        s.dirty_inode = di;
		], 
		AC_MSG_RESULT(yes)
		AC_DEFINE(HAVE_DIRTY_INODE_FLAGS, 1, Define if dirty_inode takes a flag argument ),
		AC_MSG_RESULT(no)
	)
        CFLAGS=$tmp_cflags

	CFLAGS=$oldcflags

])
m4trace:maint/config/ldap.m4:26: -1- AC_DEFUN([AX_LDAP], [
    AC_ARG_WITH([ldap],
                AC_HELP_STRING([--with-ldap=DIR],
                               [Location of OpenLDAP installation (for certificate-based security)]),
                [ if test "$withval" = "no"; then
                      want_ldap="no"
                      _libldap_with="no"
                  elif test "$withval" = "yes"; then
                      want_ldap="yes"
                      _libldap_with="yes"
                  else
                      want_ldap="yes"
                      _libldap_with=$withval
                  fi
                ],
                [ if test "x$ENABLE_SECURITY_CERT" = "x1"; then
                      want_ldap="yes"
                      _libldap_with="yes"
                  else
                      want_ldap="no"
                      _libldap_with="no"
                  fi
                ])

    if test "x$_libldap_with" != x"no"; then
        AC_MSG_CHECKING(for LDAP support)

        if test "$_libldap_with" = "yes"; then
            if test -f /usr/local/openldap/include/ldap.h; then
                LDAP_INCDIR=/usr/local/openldap/include/
                LDAP_LIBDIR=/usr/local/openldap/lib/
                found_ldap="yes"
            elif test -f /usr/include/ldap.h; then
                LDAP_INCDIR=/usr/include
                if test -d /usr/lib64; then
                    LDAP_LIBDIR=/usr/lib64
                else
                    LDAP_LIBDIR=/usr/lib
                fi
                found_ldap="yes"
            elif test -f /usr/local/include/ldap.h; then
                LDAP_INCDIR=/usr/local/include
                if test -d /usr/local/lib64; then
                    LDAP_LIBDIR=/usr/local/lib64
                else
                    LDAP_LIBDIR=/usr/local/lib
                fi
                found_ldap="yes"
            else
                found_ldap="no"
                AC_MSG_RESULT(no)
            fi
        else
            if test -f $_libldap_with/include/ldap.h; then
                LDAP_INCDIR=$_libldap_with/include
                LDAP_LIBDIR=$_libldap_with/lib
                found_ldap="yes"
            else
                found_ldap="no"
                AC_MSG_RESULT(no)
            fi
        fi

       if test "x$found_ldap" != "xno" ; then
           if test "$_libldap_with" != "yes"; then
                LDAP_CPPFLAGS="I$LDAP_INCDIR"
                LDAP_LDFLAGS="-L$LDAP_LIBDIR"
           fi

           found_ldap="yes"           
# set in src/common/security/module.mk.in:
#          AC_DEFINE(LDAP_DEPRECATED, 1, [Define to 1 if LDAP deprecated functions are used.])
           AC_MSG_RESULT(yes)
           
           # avoid adding libraries to LIBS w/dummy line
           AC_CHECK_LIB(lber, ber_init, [_dummy=x], 
                        AC_MSG_ERROR([Could not link against liblber.so]))
           AC_CHECK_LIB(ldap, ldap_init, [_dummy=x], 
                        AC_MSG_ERROR([Could not link against libldap.so]),
                        [-llber])

           LDAP_LIB="-lldap -llber"
       fi
  fi

  AC_SUBST(LDAP_CPPFLAGS)
  AC_SUBST(LDAP_LDFLAGS)
  AC_SUBST(LDAP_LIB)

  unset _libldap_with
  unset found_ldap
  unset _dummy
])
m4trace:maint/config/mx.m4:8: -1- AC_DEFUN([AX_MX], [
    dnl Configure options for MX install path.
    dnl --with-mx=<dir> is shorthand for
    dnl    --with-mx-includes=<dir>/include
    dnl    --with-mx-libs=<dir>/lib  (or lib64 if that exists)
    mx_home=
    AC_ARG_WITH(mx,
[  --with-mx=<dir>         Location of the MX install (default no MX)],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-mx requires the path to your MX tree.])
	elif test "$withval" != no ; then
	    mx_home="$withval"
	fi
    )
    AC_ARG_WITH(mx-includes,
[  --with-mx-includes=<dir>
                          Location of the MX includes],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-mx-includes requires path to MX headers.])
	elif test "$withval" != no ; then
	    MX_INCDIR="$withval"
	fi
    )
    AC_ARG_WITH(mx-libs,
[  --with-mx-libs=<dir>    Location of the MX libraries],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-mx-libs requires path to MX libraries.])
	elif test "$withval" != no ; then
	    MX_LIBDIR="$withval"
	fi
    )
    dnl If supplied the incls and libs explicitly, use them, else populate them
    dnl using guesses from the --with-mx dir.
    if test -n "$mx_home" ; then
	if test -z "$MX_INCDIR"; then
	    MX_INCDIR=$mx_home/include
	fi
	if test -z "$MX_LIBDIR"; then
	    MX_LIBDIR=$mx_home/lib64
	    if test ! -d "$MX_LIBDIR" ; then
		MX_LIBDIR=$mx_home/lib
	    fi
	fi
    fi
    dnl If anything MX-ish was set, go look for header.
    if test -n "$MX_INCDIR$MX_LIBDIR" ; then
	save_cppflags="$CPPFLAGS"
	CPPFLAGS="$CPPFLAGS -I$MX_INCDIR -I$MX_INCDIR/mx"
	AC_CHECK_HEADER(myriexpress.h,,
			AC_MSG_ERROR([Header myriexpress.h not found.]))
	dnl Run test is not possible on a machine that does not have a MX NIC.
	dnl Link test would work, but just check for existence.
	if test ! -f $MX_LIBDIR/libmyriexpress.so ; then
	    if test ! -f $MX_LIBDIR/libmyriexpress.a ; then
		AC_MSG_ERROR([Neither MX library libmyriexpress.so or libmyriexpress.a found.])
	    fi
	fi
	BUILD_MX=1
	CPPFLAGS="$save_cppflags"
    fi
    AC_SUBST(BUILD_MX)
    AC_SUBST(MX_INCDIR)
    AC_SUBST(MX_LIBDIR)

    if test -n "$BUILD_MX" ; then
        dnl Check for existence of mx_decompose_endpoint_addr2
        save_ldflags="$LDFLAGS"
        LDFLAGS="-L$MX_LIBDIR $LDFLAGS"
	save_libs="$LIBS"
	LIBS="-lmyriexpress -lpthread $LIBS"
        save_cppflags="$CPPFLAGS"
        CPPFLAGS="$CPPFLAGS -I$MX_INCDIR"

        AC_MSG_CHECKING(for mx_decompose_endpoint_addr2)
        AC_TRY_LINK([
            #include "mx_extensions.h"
            #include <stdlib.h>
        ], [ 
            mx_endpoint_addr_t epa;
            mx_decompose_endpoint_addr2(epa, NULL, NULL, NULL);
        ],
            AC_MSG_RESULT(yes),
            AC_MSG_RESULT(no)
	    AC_MSG_ERROR([Function mx_decompose_endpoint_addr2() not found.])
        )

        LDFLAGS="$save_ldflags"
        CPPFLAGS="$save_cppflags"
        LIBS="$save_libs"
    fi
])
m4trace:maint/config/portals.m4:1: -1- AC_DEFUN([AX_PORTALS], [
    dnl
    dnl Configure to build Portals BMI method, if requested and available.
    dnl Use
    dnl   --with-portals       To find include files and libraries in standard
    dnl                        system paths.
    dnl   --with-portals=<dir> To specify a location that has include and lib
    dnl                        (or lib64) subdirectories with the goods.
    dnl
    dnl Or specify the -I an -L and -l flags exactly using, e.g.:
    dnl
    dnl   --with-portals-includes="-I<dir>"
    dnl   --with-portals-libs="-L<dir> -l<name>"
    dnl
    dnl The C file uses #include <portals/portals3.h>, so choose your include
    dnl path accordingly.  If it did not do this, portals/errno.h would sit in
    dnl front of the system version.
    dnl
    use_portals=
    home=
    incs=
    libs=
    AC_ARG_WITH(portals,
    [  --with-portals[=<dir>]   Location of the Portals install (default no Portals)],
	if test -z "$withval" -o "$withval" = yes ; then
	    use_portals=yes
	elif test "$withval" != no ; then
	    home="$withval"
	fi
    )
    AC_ARG_WITH(portals-includes,
[  --with-portals-includes=<dir>
                          Extra CFLAGS to specify Portals includes],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-portals-includes requires an argument.])
	elif test "$withval" != no ; then
	    incs="$withval"
	fi
    )
    AC_ARG_WITH(portals-libs,
[  --with-portals-libs=<dir>
                          Extra LIBS to link Portals libraries],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-portals-libs requires an argument.])
	elif test "$withval" != no ; then
	    libs="$withval"
	fi
    )
    dnl If supplied the incls and libs explicitly, use them, else populate them
    dnl using guesses from the --with-portals dir.
    if test -n "$home" ; then
	if test -z "$incs"; then
	    incs=-I$home/include
	fi
	if test -z "$libs"; then
	    libs=-L$home/lib64
	    if test ! -d "$home/lib64" ; then
		libs=-L$home/lib
	    fi
	fi
    fi

    dnl
    dnl Look for headers and libs.
    dnl
    BUILD_PORTALS=
    PORTALS_INCS=
    PORTALS_LIBS=
    if test "X$use_portals$home$incs$libs" != X ; then
	# Save stuff
	save_cppflags="$CPPFLAGS"
	save_libs="$LIBS"

	PORTALS_INCS="$incs"
	CPPFLAGS="$CPPFLAGS $PORTALS_INCS"

	PORTALS_LIBS="$libs"
	LIBS="$save_libs $PORTALS_LIBS"

	AC_MSG_CHECKING([for portals3.h header])
	ok=no
	AC_TRY_COMPILE(
	    [#include <portals/portals3.h>],
	    [int m, n; m = PtlInit(&n);],
	    [ok=yes])

	if test "$ok" = yes ; then
	    AC_MSG_RESULT([yes])
	else
	    AC_MSG_RESULT([no])
	    AC_MSG_ERROR([Header portals/portals3.h not found.])
	fi

	dnl try without first, for Cray, then try TCP version
	dnl Run test is not always possible, esp when cross-compiling or on
	dnl a box that does not have the hardware.
	AC_MSG_CHECKING([for portals libraries])
	ok=no
	AC_TRY_LINK(
	    [#include <portals/portals3.h>],
	    [int m, n; m = PtlInit(&n);],
	    [ok=yes])

	if test "$ok" = no ; then
	    PORTALS_LIBS="$libs -lportals"
	    LIBS="$save_libs $PORTALS_LIBS"
	    AC_TRY_LINK(
		[#include <portals/portals3.h>],
		[int m, n; m = PtlInit(&n);],
		[ok=yes])
	fi

	if test "$ok" = no ; then
	    PORTALS_LIBS="$libs -lp3api -lp3lib -lp3utcp -lp3rt -lpthread"
	    LIBS="$save_libs $PORTALS_LIBS"
	    AC_TRY_LINK(
		[#include <portals/portals3.h>],
		[int m, n; m = PtlInit(&n);],
		[ok=yes])
	fi

	if test "$ok" = yes ; then
	    AC_MSG_RESULT([yes])
	    BUILD_PORTALS=1
	else
	    AC_MSG_RESULT([no])
	    AC_MSG_ERROR([Could not link Portals library.])
	fi

	#
	# Check for API variations.
	#
	AC_CHECK_FUNCS(PtlErrorStr)
	AC_CHECK_FUNCS(PtlEventKindStr)

	AC_TRY_COMPILE(
	    [#include <portals/portals3.h>],
	    [int m; ptl_process_id_t any_pid;
	     m = PtlACEntry(0, 0, any_pid, (ptl_uid_t) -1, (ptl_jid_t) -1, 0);],
	    AC_DEFINE(HAVE_PTLACENTRY_JID, 1,
		      [Define if have PtlACEntry with jid argument.]))

	# Reset
	CPPFLAGS="$save_cppflags"
	LIBS="$save_libs"
    fi
    AC_SUBST(BUILD_PORTALS)
    AC_SUBST(PORTALS_INCS)
    AC_SUBST(PORTALS_LIBS)
])
m4trace:maint/config/rt.m4:2: -1- AC_DEFUN([AX_CHECK_NEEDS_LIBRT], [

AC_MSG_CHECKING([if server lib needs -lrt])
AC_TRY_LINK(
	[#include <stdlib.h>
	 #include <unistd.h>
	 #include <aio.h>],
	[lio_listio(LIO_NOWAIT, NULL, 0, NULL);],
	[AC_MSG_RESULT(no)],
	[
		oldlibs=$LIBS
		LIBS="$LIBS -lrt"
		AC_TRY_LINK(
			[#include <stdlib.h>
			 #include <unistd.h>
			 #include <aio.h>],
			[lio_listio(LIO_NOWAIT, NULL, 0, NULL);],
			[NEEDS_LIBRT=1
			 AC_SUBST(NEEDS_LIBRT)
			 AC_MSG_RESULT(yes)],
			[AC_MSG_ERROR(failed attempting to link lio_listio)])
		LIBS=$oldlibs
	])
])
m4trace:maint/config/rt.m4:28: -1- AC_DEFUN([AX_CHECK_LIB_NEEDS_LIBRT], [

AC_MSG_CHECKING([if user library needs -lrt])
AC_TRY_LINK(
	[#include <sys/mman.h>],
	[shm_open("foo", 0, 0);],
	[AC_MSG_RESULT(no)],
	[
		oldlibs=$LIBS
		LIBS="$LIBS -lrt"
		AC_TRY_LINK(
	        [#include <sys/mman.h>],
	        [shm_open("foo", 0, 0);],
			[LIB_NEEDS_LIBRT=1
			 AC_SUBST(LIB_NEEDS_LIBRT)
			 AC_MSG_RESULT(yes)],
			[AC_MSG_ERROR(failed attempting to link shm_open)])
		LIBS=$oldlibs
	])
])
m4trace:maint/config/ssl.m4:42: -1- AC_DEFUN([AX_OPENSSL], [
    AC_ARG_WITH([ssl],
                AS_HELP_STRING([--with-ssl=DIR],
                [Location of the OpenSSL installation (if custom)]),
                [
                if test "$withval" = "no"; then
                    want_ssl="no"
                elif test "$withval" = "yes"; then
                    want_ssl="yes"
                    ac_ssl_path=""
                else
                    want_ssl="yes"
                    ac_ssl_path="$withval"
                fi
                ],
                [want_ssl="yes"])

    if test "x$want_ssl" = "xyes"; then
        AC_REQUIRE([AC_PROG_CC])
        AC_MSG_CHECKING(for openssl/md5.h)

        if test "$ac_ssl_path" != ""; then
            OPENSSL_CPPFLAGS="-I$ac_ssl_path/include"
            if test -d "$ac_ssl_path/lib64"; then
                OPENSSL_LDFLAGS="-L$ac_ssl_path/lib64"
            fi
            OPENSSL_LDFLAGS="$OPENSSL_LDFLAGS -L$ac_ssl_path/lib"
        else
            for ac_ssl_path_tmp in /usr /usr/local /opt ; do
                if test -d "$ac_ssl_path_tmp" && test -r "$ac_ssl_path_tmp/include/openssl/md5.h"; then
                    OPENSSL_CPPFLAGS="-I$ac_ssl_path_tmp/include"
                    if test -d "$ac_ssl_path_tmp/lib64"; then
                        OPENSSL_LDFLAGS="-L$ac_ssl_path_tmp/lib64"
                    fi
                    OPENSSL_LDFLAGS="$OPENSSL_LDFLAGS -L$ac_ssl_path_tmp/lib"
                    break;
                fi
            done
        fi

        if test "$OPENSSL_CPPFLAGS" = "";then
            AC_MSG_RESULT(no)
            AC_MSG_WARN('*** openssl/md5.h does not exist')
        else
            AC_MSG_RESULT(yes)

            CPPFLAGS="$CPPFLAGS $OPENSSL_CPPFLAGS"
            export CPPFLAGS
            LDFLAGS="$LDFLAGS $OPENSSL_LDFLAGS"
            export LDFLAGS

            AC_SUBST(OPENSSL_CPPFLAGS)
            AC_SUBST(OPENSSL_LDFLAGS)

            ax_lib=ssl
            AC_CHECK_LIB($ax_lib, TLS_method,
                [link_ssl="yes";break], [link_ssl="no"])
            if test "x$link_ssl" = "xno"; then
                AC_CHECK_LIB($ax_lib, SSLv23_method,
                [link_ssl="yes";break], [link_ssl="no"])
                if test "x$link_ssl" = "xno"; then
                    AC_MSG_WARN(Could not link against lib$ax_lib !)
                else
                    AC_DEFINE(HAVE_OPENSSL, ,
                    [Define to 1 if OpenSSL is available])
                fi  
            else
                AC_DEFINE(HAVE_OPENSSL_1_1, ,
                    [Define to 1 if OpenSSL >= 1.1 is available])
                AC_DEFINE(HAVE_OPENSSL, ,
                    [Define to 1 if OpenSSL is available])
            fi

            ax_lib=crypto
            AC_CHECK_LIB($ax_lib, MD5_Init,
                [link_crypto="yes";break], [link_crypto="no"])
            if test "x$link_crypto" = "xno"; then
                AC_MSG_WARN(Could not link against lib$ax_lib !)
            else
                if test "x$link_ssl" = "xno"; then
                    AC_DEFINE(HAVE_OPENSSL, ,
                        [Define to 1 if OpenSSL is available])
                fi
            fi

            if test "x$link_ssl" = "xyes"; then
                OPENSSL_LIB="$OPENSSL_LIB -lssl"
            fi
            if test "x$link_crypto" = "xyes"; then
                OPENSSL_LIB="$OPENSSL_LIB -lcrypto"
            fi
            AC_SUBST(OPENSSL_LIB)

            if test -d "/usr/kerberos/include" ; then
                OPENSSL_CPPFLAGS="$OPENSSL_CPPFLAGS -I/usr/kerberos/include"
                AC_SUBST(OPENSSL_CPPFLAGS)
            fi
        fi
    fi
])
m4trace:maint/config/zoid.m4:6: -1- AC_DEFUN([AX_ZOID], [
    dnl Configure options for ZOID install path.
    dnl --with-zoid=<dir>
    AC_ARG_WITH(zoid,
[  --with-zoid=<dir>         Location of the ZOID tree (default no ZOID)],
	if test -z "$withval" -o "$withval" = yes ; then
	    AC_MSG_ERROR([Option --with-zoid requires the path to your ZOID source tree.])
	elif test "$withval" != no ; then
	    ZOID_SRCDIR="$withval"
	fi
    )
    if test -n "$ZOID_SRCDIR" ; then
	save_cppflags="$CPPFLAGS"
	CPPFLAGS="$CPPFLAGS -Isrc/io/bmi -I$ZOID_SRCDIR/include -I$ZOID_SRCDIR/zbmi -I$ZOID_SRCDIR/zbmi/implementation"
	AC_CHECK_HEADER(zbmi.h,, AC_MSG_ERROR([Header zbmi.h not found.]))
	AC_CHECK_HEADER(zoid_api.h,, AC_MSG_ERROR([Header zoid_api.h not found.]))
	AC_CHECK_HEADER(zbmi_protocol.h,, AC_MSG_ERROR([Header zbmi_protocol.h not found.]))
	CPPFLAGS="$save_cppflags"
	BUILD_ZOID=1
    fi
    AC_SUBST(BUILD_ZOID)
    AC_SUBST(ZOID_SRCDIR)
])
m4trace:configure.ac:9: -1- m4_pattern_forbid([^_?A[CHUM]_])
m4trace:configure.ac:9: -1- m4_pattern_forbid([_AC_])
m4trace:configure.ac:9: -1- m4_pattern_forbid([^LIBOBJS$], [do not use LIBOBJS directly, use AC_LIBOBJ (see section `AC_LIBOBJ vs LIBOBJS'])
m4trace:configure.ac:9: -1- m4_pattern_allow([^AS_FLAGS$])
m4trace:configure.ac:9: -1- m4_pattern_forbid([^_?m4_])
m4trace:configure.ac:9: -1- m4_pattern_forbid([^dnl$])
m4trace:configure.ac:9: -1- m4_pattern_forbid([^_?AS_])
m4trace:configure.ac:9: -1- m4_pattern_allow([^SHELL$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PATH_SEPARATOR$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_NAME$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_TARNAME$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_VERSION$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_STRING$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_BUGREPORT$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_URL$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^exec_prefix$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^prefix$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^program_transform_name$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^bindir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^sbindir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^libexecdir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^datarootdir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^datadir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^sysconfdir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^sharedstatedir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^localstatedir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^includedir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^oldincludedir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^docdir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^infodir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^htmldir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^dvidir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^pdfdir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^psdir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^libdir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^localedir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^mandir$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_NAME$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_TARNAME$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_VERSION$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_STRING$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_BUGREPORT$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^PACKAGE_URL$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^DEFS$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^ECHO_C$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^ECHO_N$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^ECHO_T$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^LIBS$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^build_alias$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^host_alias$])
m4trace:configure.ac:9: -1- m4_pattern_allow([^target_alias$])
m4trace:configure.ac:29: -1- m4_pattern_allow([^PVFS2_VERSION$])
m4trace:configure.ac:30: -1- m4_pattern_allow([^PVFS2_VERSION_MAJOR$])
m4trace:configure.ac:31: -1- m4_pattern_allow([^PVFS2_VERSION_MINOR$])
m4trace:configure.ac:32: -1- m4_pattern_allow([^PVFS2_VERSION_SUB$])
m4trace:configure.ac:34: -1- m4_pattern_allow([^PVFS2_VERSION_MAJOR$])
m4trace:configure.ac:35: -1- m4_pattern_allow([^PVFS2_VERSION_MINOR$])
m4trace:configure.ac:36: -1- m4_pattern_allow([^PVFS2_VERSION_SUB$])
m4trace:configure.ac:43: -1- m4_pattern_allow([^build$])
m4trace:configure.ac:43: -1- m4_pattern_allow([^build_cpu$])
m4trace:configure.ac:43: -1- m4_pattern_allow([^build_vendor$])
m4trace:configure.ac:43: -1- m4_pattern_allow([^build_os$])
m4trace:configure.ac:43: -1- m4_pattern_allow([^host$])
m4trace:configure.ac:43: -1- m4_pattern_allow([^host_cpu$])
m4trace:configure.ac:43: -1- m4_pattern_allow([^host_vendor$])
m4trace:configure.ac:43: -1- m4_pattern_allow([^host_os$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^CC$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^CFLAGS$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^LDFLAGS$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^LIBS$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^CPPFLAGS$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^CC$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^CC$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^CC$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^CC$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^ac_ct_CC$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^EXEEXT$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^OBJEXT$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^CPP$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^CPPFLAGS$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^CPP$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^GREP$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^EGREP$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^STDC_HEADERS$])
m4trace:configure.ac:53: -1- m4_pattern_allow([^HAVE_PWD_H$])
m4trace:configure.ac:55: -1- m4_pattern_allow([^HAVE_FEATURES_H$])
m4trace:configure.ac:57: -1- m4_pattern_allow([^HAVE_FSTAB_H$])
m4trace:configure.ac:59: -1- m4_pattern_allow([^HAVE_MALLOC_H$])
m4trace:configure.ac:61: -1- m4_pattern_allow([^HAVE_MEMORY_H$])
m4trace:configure.ac:63: -1- m4_pattern_allow([^HAVE_MNTENT_H$])
m4trace:configure.ac:65: -1- m4_pattern_allow([^HAVE_NETDB_H$])
m4trace:configure.ac:67: -1- m4_pattern_allow([^HAVE_STDARG_H$])
m4trace:configure.ac:69: -1- m4_pattern_allow([^HAVE_STDINT_H$])
m4trace:configure.ac:71: -1- m4_pattern_allow([^HAVE_STDLIB_H$])
m4trace:configure.ac:73: -1- m4_pattern_allow([^HAVE_STDIO_H$])
m4trace:configure.ac:75: -1- m4_pattern_allow([^HAVE_FCNTL_H$])
m4trace:configure.ac:77: -1- m4_pattern_allow([^HAVE_UTIME_H$])
m4trace:configure.ac:79: -1- m4_pattern_allow([^HAVE_STRING_H$])
m4trace:configure.ac:81: -1- m4_pattern_allow([^HAVE_STRINGS_H$])
m4trace:configure.ac:83: -1- m4_pattern_allow([^HAVE_ASSERT_H$])
m4trace:configure.ac:85: -1- m4_pattern_allow([^HAVE_LIBGEN_H$])
m4trace:configure.ac:87: -1- m4_pattern_allow([^HAVE_DIRENT_H$])
m4trace:configure.ac:89: -1- m4_pattern_allow([^HAVE_TIME_H$])
m4trace:configure.ac:91: -1- m4_pattern_allow([^HAVE_DLFCN_H$])
m4trace:configure.ac:94: -1- m4_pattern_allow([^HAVE_LINUX_TYPES_H$])
m4trace:configure.ac:96: -1- m4_pattern_allow([^HAVE_LINUX_MALLOC_H$])
m4trace:configure.ac:99: -1- m4_pattern_allow([^HAVE_SELINUX_H$])
m4trace:configure.ac:104: -1- m4_pattern_allow([^HAVE_SYS_VFS_H$])
m4trace:configure.ac:106: -1- m4_pattern_allow([^HAVE_SYS_MOUNT_H$])
m4trace:configure.ac:108: -1- m4_pattern_allow([^HAVE_SYS_STAT_H$])
m4trace:configure.ac:110: -1- m4_pattern_allow([^HAVE_SYS_TYPES_H$])
m4trace:configure.ac:112: -1- m4_pattern_allow([^HAVE_SYS_SOCKET_H$])
m4trace:configure.ac:114: -1- m4_pattern_allow([^HAVE_SYS_SENDFILE_H$])
m4trace:configure.ac:116: -1- m4_pattern_allow([^HAVE_SYS_XATTR_H$])
m4trace:configure.ac:118: -1- m4_pattern_allow([^HAVE_SYS_STATVFS_H$])
m4trace:configure.ac:120: -1- m4_pattern_allow([^HAVE_SYS_UIO_H$])
m4trace:configure.ac:122: -1- m4_pattern_allow([^HAVE_SYS_MMAN_H$])
m4trace:configure.ac:124: -1- m4_pattern_allow([^HAVE_SYS_TIME_H$])
m4trace:configure.ac:127: -1- m4_pattern_allow([^HAVE_ARPA_INET_H$])
m4trace:configure.ac:129: -1- m4_pattern_allow([^HAVE_ATTR_XATTR_H$])
m4trace:configure.ac:132: -1- m4_pattern_allow([^SIZEOF_LONG_INT$])
m4trace:configure.ac:135: -1- m4_pattern_allow([^INSTALL_PROGRAM$])
m4trace:configure.ac:135: -1- m4_pattern_allow([^INSTALL_SCRIPT$])
m4trace:configure.ac:135: -1- m4_pattern_allow([^INSTALL_DATA$])
m4trace:configure.ac:136: -1- m4_pattern_allow([^CC$])
m4trace:configure.ac:136: -1- m4_pattern_allow([^CFLAGS$])
m4trace:configure.ac:136: -1- m4_pattern_allow([^LDFLAGS$])
m4trace:configure.ac:136: -1- m4_pattern_allow([^LIBS$])
m4trace:configure.ac:136: -1- m4_pattern_allow([^CPPFLAGS$])
m4trace:configure.ac:136: -1- m4_pattern_allow([^CC$])
m4trace:configure.ac:136: -1- m4_pattern_allow([^CC$])
m4trace:configure.ac:136: -1- m4_pattern_allow([^CC$])
m4trace:configure.ac:136: -1- m4_pattern_allow([^CC$])
m4trace:configure.ac:136: -1- m4_pattern_allow([^ac_ct_CC$])
m4trace:configure.ac:145: -1- m4_pattern_allow([^CPP$])
m4trace:configure.ac:145: -1- m4_pattern_allow([^CPPFLAGS$])
m4trace:configure.ac:145: -1- m4_pattern_allow([^CPP$])
m4trace:configure.ac:146: -1- m4_pattern_allow([^HAVE_PERL$])
m4trace:configure.ac:151: -1- m4_pattern_allow([^HAVE_FIND$])
m4trace:configure.ac:156: -1- m4_pattern_allow([^HAVE_BISON$])
m4trace:configure.ac:161: -1- m4_pattern_allow([^HAVE_FLEX$])
m4trace:configure.ac:175: -1- m4_pattern_allow([^BUILD_CC$])
m4trace:configure.ac:182: -1- m4_pattern_allow([^BUILD_CC$])
m4trace:configure.ac:183: -1- m4_pattern_allow([^BUILD_CFLAGS$])
m4trace:configure.ac:184: -1- m4_pattern_allow([^BUILD_LDFLAGS$])
m4trace:configure.ac:251: -1- m4_pattern_allow([^LIBCFLAGS$])
m4trace:configure.ac:252: -1- m4_pattern_allow([^THREAD_LIB$])
m4trace:configure.ac:263: -1- m4_pattern_allow([^BUILD_SERVER$])
m4trace:configure.ac:278: -2- m4_pattern_allow([^DATABASE_BACKEND$])
m4trace:configure.ac:279: -2- m4_pattern_allow([^NEED_BERKELEY_DB$])
m4trace:configure.ac:280: -2- m4_pattern_allow([^NEED_LMDB$])
m4trace:configure.ac:283: -2- m4_pattern_allow([^DATABASE_BACKEND$])
m4trace:configure.ac:284: -2- m4_pattern_allow([^NEED_BERKELEY_DB$])
m4trace:configure.ac:285: -2- m4_pattern_allow([^NEED_LMDB$])
m4trace:configure.ac:291: -1- m4_pattern_allow([^WANT_INTERNAL_LMDB$])
m4trace:configure.ac:294: -1- AX_OPENSSL
m4trace:configure.ac:294: -1- m4_pattern_allow([^OPENSSL_CPPFLAGS$])
m4trace:configure.ac:294: -1- m4_pattern_allow([^OPENSSL_LDFLAGS$])
m4trace:configure.ac:294: -1- m4_pattern_allow([^HAVE_OPENSSL$])
m4trace:configure.ac:294: -1- m4_pattern_allow([^HAVE_OPENSSL_1_1$])
m4trace:configure.ac:294: -1- m4_pattern_allow([^HAVE_OPENSSL$])
m4trace:configure.ac:294: -1- m4_pattern_allow([^HAVE_OPENSSL$])
m4trace:configure.ac:294: -1- m4_pattern_allow([^OPENSSL_LIB$])
m4trace:configure.ac:294: -1- m4_pattern_allow([^OPENSSL_CPPFLAGS$])
m4trace:configure.ac:297: -1- AX_GETGROUPLIST
m4trace:configure.ac:297: -2- m4_pattern_allow([^HAVE_GETGROUPLIST$])
m4trace:configure.ac:297: -3- m4_pattern_allow([^HAVE_GETGROUPLIST$])
m4trace:configure.ac:297: -2- m4_pattern_allow([^HAVE_GETGROUPLIST_GID$])
m4trace:configure.ac:297: -3- m4_pattern_allow([^HAVE_GETGROUPLIST_GID$])
m4trace:configure.ac:297: -2- m4_pattern_allow([^HAVE_GETGROUPLIST_INT$])
m4trace:configure.ac:297: -3- m4_pattern_allow([^HAVE_GETGROUPLIST_INT$])
m4trace:configure.ac:300: -1- m4_pattern_allow([^ENABLE_SECURITY_KEY$])
m4trace:configure.ac:310: -1- m4_pattern_allow([^ENABLE_SECURITY_KEY$])
m4trace:configure.ac:313: -1- m4_pattern_allow([^ENABLE_SECURITY_CERT$])
m4trace:configure.ac:323: -1- m4_pattern_allow([^ENABLE_SECURITY_CERT$])
m4trace:configure.ac:326: -1- m4_pattern_allow([^ENABLE_CAPCACHE$])
m4trace:configure.ac:326: -1- m4_pattern_allow([^ENABLE_CAPCACHE$])
m4trace:configure.ac:341: -1- m4_pattern_allow([^ENABLE_CAPCACHE$])
m4trace:configure.ac:344: -1- m4_pattern_allow([^ENABLE_CREDCACHE$])
m4trace:configure.ac:344: -1- m4_pattern_allow([^ENABLE_CREDCACHE$])
m4trace:configure.ac:359: -1- m4_pattern_allow([^ENABLE_CREDCACHE$])
m4trace:configure.ac:362: -1- m4_pattern_allow([^ENABLE_CERTCACHE$])
m4trace:configure.ac:362: -1- m4_pattern_allow([^ENABLE_CERTCACHE$])
m4trace:configure.ac:378: -1- m4_pattern_allow([^ENABLE_CERTCACHE$])
m4trace:configure.ac:400: -1- AX_LDAP
m4trace:configure.ac:400: -2- _m4_warn([obsolete], [The macro `AC_HELP_STRING' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:207: AC_HELP_STRING is expanded from...
maint/config/ldap.m4:26: AX_LDAP is expanded from...
configure.ac:400: the top level])
m4trace:configure.ac:400: -1- m4_pattern_allow([^LDAP_CPPFLAGS$])
m4trace:configure.ac:400: -1- m4_pattern_allow([^LDAP_LDFLAGS$])
m4trace:configure.ac:400: -1- m4_pattern_allow([^LDAP_LIB$])
m4trace:configure.ac:408: -1- m4_pattern_allow([^ENABLE_PROFILING$])
m4trace:configure.ac:417: -1- m4_pattern_allow([^ENABLE_PROFILING$])
m4trace:configure.ac:437: -1- m4_pattern_allow([^BUILD_BMI_ONLY$])
m4trace:configure.ac:442: -1- m4_pattern_allow([^BUILD_SERVER$])
m4trace:configure.ac:461: -1- m4_pattern_allow([^RA_CACHE$])
m4trace:configure.ac:473: -1- m4_pattern_allow([^RESET_FILE_POS$])
m4trace:configure.ac:485: -1- m4_pattern_allow([^TRUSTED_CONNECTIONS$])
m4trace:configure.ac:492: -1- m4_pattern_allow([^HAVE_PKGCONFIG$])
m4trace:configure.ac:500: -1- m4_pattern_allow([^GTKLIBS$])
m4trace:configure.ac:501: -1- m4_pattern_allow([^GTKCFLAGS$])
m4trace:configure.ac:503: -1- m4_pattern_allow([^BUILD_KARMA$])
m4trace:configure.ac:531: -1- m4_pattern_allow([^build_static$])
m4trace:configure.ac:639: -1- m4_pattern_allow([^REDHAT_RELEASE$])
m4trace:configure.ac:644: -1- m4_pattern_allow([^NPTL_WORKAROUND$])
m4trace:configure.ac:663: -1- m4_pattern_allow([^MISC_TROVE_FLAGS$])
m4trace:configure.ac:676: -2- m4_pattern_allow([^HAVE_AIOCB_ERROR_CODE$])
m4trace:configure.ac:667: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:667: the top level])
m4trace:configure.ac:692: -2- m4_pattern_allow([^HAVE_AIOCB_RETURN_VALUE$])
m4trace:configure.ac:683: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:683: the top level])
m4trace:configure.ac:701: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:701: the top level])
m4trace:configure.ac:701: -1- m4_pattern_allow([^HAVE_CONST_SECURITY_CONTEXT$])
m4trace:configure.ac:723: -1- m4_pattern_allow([^WORDS_BIGENDIAN$])
m4trace:configure.ac:723: -1- m4_pattern_allow([^AC_APPLE_UNIVERSAL_BUILD$])
m4trace:configure.ac:726: -1- m4_pattern_allow([^SIZEOF_VOID_P$])
m4trace:configure.ac:734: -2- m4_pattern_allow([^WITH_MTRACE$])
m4trace:configure.ac:755: -2- m4_pattern_allow([^HAVE_TAU$])
m4trace:configure.ac:760: -1- m4_pattern_allow([^TAU_INCS$])
m4trace:configure.ac:761: -1- m4_pattern_allow([^BUILD_TAU$])
m4trace:configure.ac:837: -1- m4_pattern_allow([^BUILD_KERNEL$])
m4trace:configure.ac:869: -1- AX_KERNEL_FEATURES
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_KCONFIG$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_VMTRUNCATE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_POSIX_ACL_VALID_USER_NAMESPACE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_POSIX_ACL_USER_NAMESPACE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- m4_pattern_allow([^PVFS_KMOD_CREATE_USES_UMODE_T$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- m4_pattern_allow([^PVFS_KMOD_MKDIR_USES_UMODE_T$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- m4_pattern_allow([^PVFS_KMOD_MKNOD_USES_UMODE_T$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- m4_pattern_allow([^PVFS_KMOD_CREATE_TAKES_NAMEIDATA$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- m4_pattern_allow([^PVFS_KMOD_LOOKUP_TAKES_NAMEIDATA$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- m4_pattern_allow([^PVFS_KMOD_D_REVALIDATE_TAKES_NAMEIDATA$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- m4_pattern_allow([^PVFS_KMOD_HAVE_GET_ACL$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- m4_pattern_allow([^HAVE_D_ALLOC_ROOT$])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_I_SIZE_WRITE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_I_SIZE_READ$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_IGET_LOCKED$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_IGET4_LOCKED$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^BACKING_DEV_IN_ADDR_SPACE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_IGET5_LOCKED$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_D_SET_D_OP$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_STRUCT_XTVEC$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_STRUCT_KMEM_CACHE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_SLAB_KERNEL$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_BDI_MEMORY_BACKED$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_SENDFILE_VFS_SUPPORT$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_READV_FILE_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_WRITEV_FILE_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_FIND_INODE_HANDLE_SUPER_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_I_BLKSIZE_IN_STRUCT_INODE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_I_SEM_IN_STRUCT_INODE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_STATFS_LITE_SUPER_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_FILL_HANDLE_INODE_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_GETATTR_LITE_INODE_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_GET_FS_KEY_SUPER_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_READDIR_FILE_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_READDIRPLUS_FILE_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_READDIRPLUSLITE_FILE_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_READX_FILE_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_WRITEX_FILE_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_AIO$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_AIO_VFS_SUPPORT$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_KIOCBSETCANCELLED$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^KI_USERS_ATOMIC$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^AIO_PUT_REQ_RETURNS_INT$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_KIOCB_SET_CANCEL_FN$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_AIO_NEW_AIO_SIGNATURE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_DENTRY_STATFS_SOP$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_VFSMOUNT_GETSB$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_GETSB_NODEV$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_FSTYPE_GET_SB$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_F_DENTRY$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_FSTYPE_MOUNT_ONLY$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_XATTR$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_SETXATTR_CONST_ARG$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_PROC_HANDLER_FILE_ARG$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_PROC_HANDLER_PPOS_ARG$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- m4_pattern_allow([^HAVE_LINUX_POSIX_ACL_H$])
m4trace:configure.ac:869: -1- m4_pattern_allow([^HAVE_LINUX_POSIX_ACL_XATTR_H$])
m4trace:configure.ac:869: -1- m4_pattern_allow([^HAVE_LINUX_XATTR_ACL_H$])
m4trace:configure.ac:869: -1- m4_pattern_allow([^HAVE_LINUX_MOUNT_H$])
m4trace:configure.ac:869: -1- m4_pattern_allow([^HAVE_LINUX_IOCTL32_H$])
m4trace:configure.ac:869: -1- m4_pattern_allow([^HAVE_LINUX_COMPAT_H$])
m4trace:configure.ac:869: -1- m4_pattern_allow([^HAVE_LINUX_SYSCALLS_H$])
m4trace:configure.ac:869: -1- m4_pattern_allow([^HAVE_ASM_IOCTL32_H$])
m4trace:configure.ac:869: -1- m4_pattern_allow([^HAVE_LINUX_EXPORTFS_H$])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_GENERIC_FILE_READV$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_GENERIC_PERMISSION$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_THREE_PARAM_GENERIC_PERMISSION$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_FOUR_PARAM_GENERIC_PERMISSION$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_TWO_PARAM_GENERIC_PERMISSION$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_I_SET_NLINK$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_I_INC_NLINK$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_I_DROP_NLINK$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_I_CLEAR_NLINK$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_POSIX_ACL_EQUIV_MODE_UMODE_T$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_POSIX_ACL_CREATE_3$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_POSIX_ACL_CREATE_4$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_POSIX_ACL_CHMOD_3$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_POSIX_ACL_CHMOD_2$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_POSIX_ACL_CLONE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_FSYNC_LOFF_T_PARAMS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_GENERIC_GETXATTR$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_ARG_IN_READ_DESCRIPTOR_T$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_FHTODENTRY_EXPORT_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_ENCODEFH_EXPORT_OPERATIONS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -1- m4_pattern_allow([^PVFS_ENCODE_FS_USES_DENTRY$])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_INT_ARG2_ADDRESS_SPACE_OPERATIONS_RELEASEPAGE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_INT_RETURN_INODE_OPERATIONS_FOLLOW_LINK$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_INT_RETURN_KMEM_CACHE_DESTROY$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_INT_RETURN_ADDRESS_SPACE_OPERATIONS_INVALIDATEPAGE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_THREE_ARGUMENT_INVALIDATEPAGE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_NOWARNINGS_WHEN_INCLUDING_LINUX_CONFIG_H$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_COMPAT_IOCTL_HANDLER$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_REGISTER_IOCTL32_CONVERSION$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_KMEM_CACHE_DESTROY_INT_RETURN$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_COMBINED_AIO_AND_VECTOR$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_WRITE_ITER$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_IOV_ITER$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_ND_SET_LINK$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^GWC_USES_KIOCB$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_KZALLOC$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_TWO_ARG_REGISTER_SYSCTL_TABLE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_NO_FS_IOC_FLAGS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_OBSOLETE_STRUCT_PAGE_COUNT_NO_UNDERSCORE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_KERNEL_DEVICE_CLASSES$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_KMEM_CACHE_CREATE_DESTRUCTOR_PARAM$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_KMEM_CACHE_CREATE_CTOR_ONE_PARAM$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_TWO_PARAM_PERMISSION$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_KMEM_CACHE_CREATE_CTOR_TWO_PARAM$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_SPIN_LOCK_PAGE_ADDR_SPACE_STRUCT$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_RW_LOCK_TREE_ADDR_SPACE_STRUCT$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_SPIN_LOCK_TREE_ADDR_SPACE_STRUCT$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_RT_PRIV_LOCK_ADDR_SPACE_STRUCT$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_MAPPING_NRPAGES_MACRO$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_READ_INODE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_DROP_INODE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_PUT_INODE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_MNT_NOATIME$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_MNT_NODIRATIME$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_D_ALLOC_ANON$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_SB_DIRTY_LIST$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_CURRENT_FSUID$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_FROM_KUID$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_BACKING_DEV_INFO_NAME$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_BDI_INIT$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_CTL_NAME$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_STRATEGY_NAME$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_XATTR_HANDLER_GET_2_6_33$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_XATTR_HANDLER_GET_4_4$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_XATTR_HANDLER_SET_2_6_33$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_XATTR_HANDLER_SET_4_4$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_CONST_S_XATTR_IN_SUPERBLOCK$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_TRUE_FALSE_ENUM$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_FSYNC_DENTRY_PARAM$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_UNLOCKED_IOCTL_HANDLER$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_INODE_SETATTR$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_THREE_PARAM_D_HASH$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_TWO_PARAM_D_HASH_WITH_CONST$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_SEVEN_PARAM_D_COMPARE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_FIVE_PARAM_D_COMPARE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_D_DELETE_CONST$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_DENTRY_D_COUNT_ATOMIC$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_DENTRY_LOCKREF_STRUCT$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_D_COUNT_FUNCTION$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^C_22c6186_FLAVORED_DIO$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_THREE_PARAM_PERMISSION_WITH_FLAG$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_THREE_PARAM_ACL_CHECK$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_SPIN_LOCK_UNLOCKED$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_GET_SB_MEMBER_FILE_SYSTEM_TYPE$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:869: -2- m4_pattern_allow([^HAVE_DIRTY_INODE_FLAGS$])
m4trace:configure.ac:869: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/kernel.m4:1: AX_KERNEL_FEATURES is expanded from...
configure.ac:869: the top level])
m4trace:configure.ac:870: -1- m4_pattern_allow([^WITH_LINUX_KMOD$])
m4trace:configure.ac:886: -1- m4_pattern_allow([^THREADED_KMOD_HELPER$])
m4trace:configure.ac:895: -1- m4_pattern_allow([^LINUX_KERNEL_SRC$])
m4trace:configure.ac:896: -1- m4_pattern_allow([^LINUX24_KERNEL_SRC$])
m4trace:configure.ac:897: -1- m4_pattern_allow([^LINUX24_KERNEL_MINOR_VER$])
m4trace:configure.ac:898: -1- m4_pattern_allow([^BUILD_ABSOLUTE_TOP$])
m4trace:configure.ac:899: -1- m4_pattern_allow([^SRC_RELATIVE_TOP$])
m4trace:configure.ac:900: -1- m4_pattern_allow([^SRC_ABSOLUTE_TOP$])
m4trace:configure.ac:920: -1- m4_pattern_allow([^CC_OPT$])
m4trace:configure.ac:927: -1- m4_pattern_allow([^HAVE_PKGCONFIG$])
m4trace:configure.ac:935: -1- m4_pattern_allow([^FUSE_LDFLAGS$])
m4trace:configure.ac:936: -1- m4_pattern_allow([^FUSE_CFLAGS$])
m4trace:configure.ac:938: -1- m4_pattern_allow([^BUILD_FUSE$])
m4trace:configure.ac:977: -1- m4_pattern_allow([^ENABLE_COVERAGE$])
m4trace:configure.ac:983: -1- m4_pattern_allow([^STRICT_CFLAGS$])
m4trace:configure.ac:991: -1- m4_pattern_allow([^QUIET_COMPILE$])
m4trace:configure.ac:998: -1- m4_pattern_allow([^HAVE_SYS_EPOLL_H$])
m4trace:configure.ac:1007: -2- m4_pattern_allow([^BUILD_EPOLL$])
m4trace:configure.ac:1000: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
configure.ac:1000: the top level])
m4trace:configure.ac:1014: -1- m4_pattern_allow([^BUILD_EPOLL$])
m4trace:configure.ac:1034: -2- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1034: the top level])
m4trace:configure.ac:1047: -1- m4_pattern_allow([^PVFS2_SEGV_BACKTRACE$])
m4trace:configure.ac:1054: -1- m4_pattern_allow([^build_shared$])
m4trace:configure.ac:1073: -1- m4_pattern_allow([^build_threaded$])
m4trace:configure.ac:1077: -1- m4_pattern_allow([^PVFS_USRINT_BUILD$])
m4trace:configure.ac:1077: -1- m4_pattern_allow([^PVFS_USRINT_BUILD$])
m4trace:configure.ac:1077: -1- m4_pattern_allow([^PVFS_USRINT_BUILD$])
m4trace:configure.ac:1094: -1- m4_pattern_allow([^build_usrint$])
m4trace:configure.ac:1098: -1- AX_CHECK_LIB_NEEDS_LIBRT
m4trace:configure.ac:1098: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/rt.m4:28: AX_CHECK_LIB_NEEDS_LIBRT is expanded from...
configure.ac:1098: the top level])
m4trace:configure.ac:1098: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:2661: _AC_LINK_IFELSE is expanded from...
../../lib/autoconf/general.m4:2678: AC_LINK_IFELSE is expanded from...
../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/rt.m4:28: AX_CHECK_LIB_NEEDS_LIBRT is expanded from...
configure.ac:1098: the top level])
m4trace:configure.ac:1098: -1- m4_pattern_allow([^LIB_NEEDS_LIBRT$])
m4trace:configure.ac:1129: -1- m4_pattern_allow([^PVFS_USRINT_KMOUNT$])
m4trace:configure.ac:1129: -1- m4_pattern_allow([^PVFS_USRINT_KMOUNT$])
m4trace:configure.ac:1129: -1- m4_pattern_allow([^PVFS_USRINT_KMOUNT$])
m4trace:configure.ac:1148: -1- m4_pattern_allow([^PVFS_USRINT_CWD$])
m4trace:configure.ac:1148: -1- m4_pattern_allow([^PVFS_USRINT_CWD$])
m4trace:configure.ac:1148: -1- m4_pattern_allow([^PVFS_USRINT_CWD$])
m4trace:configure.ac:1148: -1- m4_pattern_allow([^PVFS_USRINT_CWD$])
m4trace:configure.ac:1166: -1- m4_pattern_allow([^PVFS_STDIO_REDEFSTREAM$])
m4trace:configure.ac:1166: -1- m4_pattern_allow([^PVFS_STDIO_REDEFSTREAM$])
m4trace:configure.ac:1166: -1- m4_pattern_allow([^PVFS_STDIO_REDEFSTREAM$])
m4trace:configure.ac:1180: -1- m4_pattern_allow([^PVFS_MALLOC_REDEF$])
m4trace:configure.ac:1180: -1- m4_pattern_allow([^PVFS_MALLOC_REDEF$])
m4trace:configure.ac:1180: -1- m4_pattern_allow([^PVFS_MALLOC_REDEF$])
m4trace:configure.ac:1196: -1- m4_pattern_allow([^PVFS_MALLOC_DEBUG$])
m4trace:configure.ac:1196: -1- m4_pattern_allow([^PVFS_MALLOC_DEBUG$])
m4trace:configure.ac:1196: -1- m4_pattern_allow([^PVFS_MALLOC_DEBUG$])
m4trace:configure.ac:1212: -1- m4_pattern_allow([^PVFS_MALLOC_MAGIC$])
m4trace:configure.ac:1212: -1- m4_pattern_allow([^PVFS_MALLOC_MAGIC$])
m4trace:configure.ac:1212: -1- m4_pattern_allow([^PVFS_MALLOC_MAGIC$])
m4trace:configure.ac:1225: -1- m4_pattern_allow([^PVFS_MALLOC_ZERO$])
m4trace:configure.ac:1225: -1- m4_pattern_allow([^PVFS_MALLOC_ZERO$])
m4trace:configure.ac:1225: -1- m4_pattern_allow([^PVFS_MALLOC_ZERO$])
m4trace:configure.ac:1238: -1- m4_pattern_allow([^PVFS_MALLOC_FREE_ZERO$])
m4trace:configure.ac:1238: -1- m4_pattern_allow([^PVFS_MALLOC_FREE_ZERO$])
m4trace:configure.ac:1238: -1- m4_pattern_allow([^PVFS_MALLOC_FREE_ZERO$])
m4trace:configure.ac:1261: -2- m4_pattern_allow([^HAVE_O_CLOEXEC$])
m4trace:configure.ac:1252: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1252: the top level])
m4trace:configure.ac:1281: -1- m4_pattern_allow([^PVFS_USER_ENV_VARS_ENABLED$])
m4trace:configure.ac:1281: -1- m4_pattern_allow([^PVFS_USER_ENV_VARS_ENABLED$])
m4trace:configure.ac:1281: -1- m4_pattern_allow([^BUILD_USER_ENV_VARS$])
m4trace:configure.ac:1281: -1- m4_pattern_allow([^PVFS_USER_ENV_VARS_ENABLED$])
m4trace:configure.ac:1281: -1- m4_pattern_allow([^BUILD_USER_ENV_VARS$])
m4trace:configure.ac:1298: -1- m4_pattern_allow([^PVFS_UCACHE_ENABLE$])
m4trace:configure.ac:1298: -1- m4_pattern_allow([^PVFS_UCACHE_ENABLE$])
m4trace:configure.ac:1298: -1- m4_pattern_allow([^BUILD_UCACHE$])
m4trace:configure.ac:1298: -1- m4_pattern_allow([^PVFS_UCACHE_ENABLE$])
m4trace:configure.ac:1298: -1- m4_pattern_allow([^BUILD_UCACHE$])
m4trace:configure.ac:1315: -1- _m4_warn([cross], [cannot check for file existence when cross compiling], [../../lib/autoconf/general.m4:2777: AC_CHECK_FILE is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1315: the top level])
m4trace:configure.ac:1315: -1- m4_pattern_allow([^HAVE_JNI_H$])
m4trace:configure.ac:1332: -1- m4_pattern_allow([^JAVA_HOME$])
m4trace:configure.ac:1336: -1- m4_pattern_allow([^HAVE_MAVEN$])
m4trace:configure.ac:1336: -1- m4_pattern_allow([^PVFS_JNI_ENABLE$])
m4trace:configure.ac:1336: -1- m4_pattern_allow([^PVFS_JNI_ENABLE$])
m4trace:configure.ac:1336: -1- m4_pattern_allow([^PVFS_JNI_ENABLE$])
m4trace:configure.ac:1361: -1- m4_pattern_allow([^BUILD_JNI$])
m4trace:configure.ac:1372: -2- m4_pattern_allow([^PVFS_HAVE_ACL_INCLUDES$])
m4trace:configure.ac:1366: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1366: the top level])
m4trace:configure.ac:1378: -1- m4_pattern_allow([^BUILD_ACL_INTERFACE$])
m4trace:configure.ac:1396: -2- m4_pattern_allow([^PVFS_SCANDIR_VOID$])
m4trace:configure.ac:1382: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1382: the top level])
m4trace:configure.ac:1410: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1410: the top level])
m4trace:configure.ac:1425: -1- m4_pattern_allow([^INTELC$])
m4trace:configure.ac:1426: -1- m4_pattern_allow([^GNUC$])
m4trace:configure.ac:1433: -2- m4_pattern_allow([^HAVE_LIBEFENCE$])
m4trace:configure.ac:1440: -1- m4_pattern_allow([^HAVE_VALGRIND_H$])
m4trace:configure.ac:1475: -1- AX_BERKELEY_DB([${withval}])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -1- m4_pattern_allow([^DB_CFLAGS$])
m4trace:configure.ac:1475: -1- m4_pattern_allow([^DB_LIB$])
m4trace:configure.ac:1475: -2- m4_pattern_allow([^HAVE_UNKNOWN_PARAMETER_TO_DB_STAT$])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -2- m4_pattern_allow([^HAVE_DB_DIRTY_READ$])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -2- m4_pattern_allow([^HAVE_DB_BUFFER_SMALL$])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -1- AX_BERKELEY_DB([""])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -1- m4_pattern_allow([^DB_CFLAGS$])
m4trace:configure.ac:1475: -1- m4_pattern_allow([^DB_LIB$])
m4trace:configure.ac:1475: -2- m4_pattern_allow([^HAVE_UNKNOWN_PARAMETER_TO_DB_STAT$])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -2- m4_pattern_allow([^HAVE_DB_DIRTY_READ$])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -2- m4_pattern_allow([^HAVE_DB_BUFFER_SMALL$])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1475: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/bdb.m4:1: AX_BERKELEY_DB is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:1481: AC_ARG_WITH is expanded from...
configure.ac:1475: the top level])
m4trace:configure.ac:1488: -1- m4_pattern_allow([^HAVE_LIBLMDB$])
m4trace:configure.ac:1497: -1- AX_CHECK_NEEDS_LIBRT
m4trace:configure.ac:1497: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/rt.m4:2: AX_CHECK_NEEDS_LIBRT is expanded from...
configure.ac:1497: the top level])
m4trace:configure.ac:1497: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
../../lib/m4sugar/m4sh.m4:639: AS_IF is expanded from...
../../lib/autoconf/general.m4:2661: _AC_LINK_IFELSE is expanded from...
../../lib/autoconf/general.m4:2678: AC_LINK_IFELSE is expanded from...
../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/rt.m4:2: AX_CHECK_NEEDS_LIBRT is expanded from...
configure.ac:1497: the top level])
m4trace:configure.ac:1497: -1- m4_pattern_allow([^NEEDS_LIBRT$])
m4trace:configure.ac:1503: -1- m4_pattern_allow([^TARGET_OS_DARWIN$])
m4trace:configure.ac:1506: -1- m4_pattern_allow([^TARGET_OS_DARWIN$])
m4trace:configure.ac:1507: -1- m4_pattern_allow([^CFLAGS$])
m4trace:configure.ac:1510: -1- m4_pattern_allow([^TARGET_OS_LINUX$])
m4trace:configure.ac:1512: -1- m4_pattern_allow([^TARGET_OS_LINUX$])
m4trace:configure.ac:1526: -2- m4_pattern_allow([^HAVE_GETHOSTBYNAME$])
m4trace:configure.ac:1520: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1520: the top level])
m4trace:configure.ac:1538: -2- m4_pattern_allow([^HAVE_GETHOSTBYADDR$])
m4trace:configure.ac:1531: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1531: the top level])
m4trace:configure.ac:1555: -1- m4_pattern_allow([^BUILD_BMI_TCP$])
m4trace:configure.ac:1560: -1- AX_GM
m4trace:configure.ac:1560: -1- m4_pattern_allow([^BUILD_GM$])
m4trace:configure.ac:1560: -1- m4_pattern_allow([^GM_INCDIR$])
m4trace:configure.ac:1560: -1- m4_pattern_allow([^GM_LIBDIR$])
m4trace:configure.ac:1565: -1- AX_MX
m4trace:configure.ac:1565: -1- m4_pattern_allow([^BUILD_MX$])
m4trace:configure.ac:1565: -1- m4_pattern_allow([^MX_INCDIR$])
m4trace:configure.ac:1565: -1- m4_pattern_allow([^MX_LIBDIR$])
m4trace:configure.ac:1565: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/mx.m4:8: AX_MX is expanded from...
configure.ac:1565: the top level])
m4trace:configure.ac:1570: -1- AX_IB
m4trace:configure.ac:1570: -2- m4_pattern_allow([^HAVE_IB_WRAP_COMMON_H$])
m4trace:configure.ac:1570: -1- m4_pattern_allow([^BUILD_IB$])
m4trace:configure.ac:1570: -1- m4_pattern_allow([^IB_INCDIR$])
m4trace:configure.ac:1570: -1- m4_pattern_allow([^IB_LIBDIR$])
m4trace:configure.ac:1570: -1- m4_pattern_allow([^BUILD_OPENIB$])
m4trace:configure.ac:1570: -1- m4_pattern_allow([^OPENIB_INCDIR$])
m4trace:configure.ac:1570: -1- m4_pattern_allow([^OPENIB_LIBDIR$])
m4trace:configure.ac:1570: -2- m4_pattern_allow([^HAVE_IBV_GET_DEVICES$])
m4trace:configure.ac:1570: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/ib.m4:1: AX_IB is expanded from...
configure.ac:1570: the top level])
m4trace:configure.ac:1570: -2- m4_pattern_allow([^HAVE_IBV_EVENT_CLIENT_REREGISTER$])
m4trace:configure.ac:1570: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/ib.m4:1: AX_IB is expanded from...
configure.ac:1570: the top level])
m4trace:configure.ac:1570: -2- m4_pattern_allow([^HAVE_IBV_EXP_EVENT_DCT_KEY_VIOLATION$])
m4trace:configure.ac:1570: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/ib.m4:1: AX_IB is expanded from...
configure.ac:1570: the top level])
m4trace:configure.ac:1570: -2- m4_pattern_allow([^HAVE_IBV_EXP_EVENT_DCT_ACCESS_ERR$])
m4trace:configure.ac:1570: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/ib.m4:1: AX_IB is expanded from...
configure.ac:1570: the top level])
m4trace:configure.ac:1570: -2- m4_pattern_allow([^HAVE_IBV_EXP_EVENT_DCT_REQ_ERR$])
m4trace:configure.ac:1570: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/ib.m4:1: AX_IB is expanded from...
configure.ac:1570: the top level])
m4trace:configure.ac:1575: -1- AX_PORTALS
m4trace:configure.ac:1575: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/portals.m4:1: AX_PORTALS is expanded from...
configure.ac:1575: the top level])
m4trace:configure.ac:1575: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/portals.m4:1: AX_PORTALS is expanded from...
configure.ac:1575: the top level])
m4trace:configure.ac:1575: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/portals.m4:1: AX_PORTALS is expanded from...
configure.ac:1575: the top level])
m4trace:configure.ac:1575: -1- _m4_warn([obsolete], [The macro `AC_TRY_LINK' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2687: AC_TRY_LINK is expanded from...
maint/config/portals.m4:1: AX_PORTALS is expanded from...
configure.ac:1575: the top level])
m4trace:configure.ac:1575: -1- m4_pattern_allow([^HAVE_PTLERRORSTR$])
m4trace:configure.ac:1575: -1- m4_pattern_allow([^HAVE_PTLEVENTKINDSTR$])
m4trace:configure.ac:1575: -2- m4_pattern_allow([^HAVE_PTLACENTRY_JID$])
m4trace:configure.ac:1575: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
maint/config/portals.m4:1: AX_PORTALS is expanded from...
configure.ac:1575: the top level])
m4trace:configure.ac:1575: -1- m4_pattern_allow([^BUILD_PORTALS$])
m4trace:configure.ac:1575: -1- m4_pattern_allow([^PORTALS_INCS$])
m4trace:configure.ac:1575: -1- m4_pattern_allow([^PORTALS_LIBS$])
m4trace:configure.ac:1580: -1- AX_ZOID
m4trace:configure.ac:1580: -1- m4_pattern_allow([^BUILD_ZOID$])
m4trace:configure.ac:1580: -1- m4_pattern_allow([^ZOID_SRCDIR$])
m4trace:configure.ac:1592: -2- m4_pattern_allow([^HAVE_FCNTL_F_NOCACHE$])
m4trace:configure.ac:1585: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1585: the top level])
m4trace:configure.ac:1607: -2- m4_pattern_allow([^HAVE_OPEN_O_DIRECT$])
m4trace:configure.ac:1598: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1598: the top level])
m4trace:configure.ac:1627: -2- m4_pattern_allow([^HAVE_FGETXATTR_EXTRA_ARGS$])
m4trace:configure.ac:1614: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1614: the top level])
m4trace:configure.ac:1647: -2- m4_pattern_allow([^HAVE_SETXATTR_EXTRA_ARGS$])
m4trace:configure.ac:1634: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1634: the top level])
m4trace:configure.ac:1667: -2- m4_pattern_allow([^HAVE_GETXATTR_EXTRA_ARGS$])
m4trace:configure.ac:1654: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1654: the top level])
m4trace:configure.ac:1674: -2- m4_pattern_allow([^HAVE_SYSINFO$])
m4trace:configure.ac:1678: -1- m4_pattern_allow([^HAVE_STRNLEN$])
m4trace:configure.ac:1679: -1- m4_pattern_allow([^HAVE_STRTOULL$])
m4trace:configure.ac:1680: -1- m4_pattern_allow([^HAVE_STRSTR$])
m4trace:configure.ac:1681: -1- m4_pattern_allow([^HAVE_FGETXATTR$])
m4trace:configure.ac:1682: -1- m4_pattern_allow([^HAVE_FSETXATTR$])
m4trace:configure.ac:1698: -2- m4_pattern_allow([^HAVE_FGETXATTR_PROTOTYPE$])
m4trace:configure.ac:1686: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1686: the top level])
m4trace:configure.ac:1723: -2- m4_pattern_allow([^HAVE_FGETXATTR_EXTRA_ARGS$])
m4trace:configure.ac:1706: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1706: the top level])
m4trace:configure.ac:1741: -2- m4_pattern_allow([^HAVE_FSETXATTR_EXTRA_ARGS$])
m4trace:configure.ac:1728: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1728: the top level])
m4trace:configure.ac:1747: -1- m4_pattern_allow([^HAVE_GETMNTENT$])
m4trace:configure.ac:1761: -1- m4_pattern_allow([^SERVER_LDFLAGS$])
m4trace:configure.ac:1765: -1- m4_pattern_allow([^HAVE_EXECINFO_H$])
m4trace:configure.ac:1769: -1- m4_pattern_allow([^GOSSIP_ENABLE_BACKTRACE$])
m4trace:configure.ac:1785: -1- m4_pattern_allow([^HAVE_SDL_TTF_H$])
m4trace:configure.ac:1785: -1- m4_pattern_allow([^HAVE_SDL_SDL_TTF_H$])
m4trace:configure.ac:1793: -1- m4_pattern_allow([^BUILD_VIS$])
m4trace:configure.ac:1794: -1- m4_pattern_allow([^VISCFLAGS$])
m4trace:configure.ac:1795: -1- m4_pattern_allow([^VISLIBS$])
m4trace:configure.ac:1831: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1831: the top level])
m4trace:configure.ac:1831: -1- m4_pattern_allow([^BSWAP_64_IS_A_FUNC$])
m4trace:configure.ac:1862: -1- _m4_warn([obsolete], [The macro `AC_TRY_COMPILE' is obsolete.
You should run autoupdate.], [../../lib/autoconf/general.m4:2614: AC_TRY_COMPILE is expanded from...
configure.ac:1862: the top level])
m4trace:configure.ac:1862: -1- m4_pattern_allow([^HAVE_STDIO_GETS$])
m4trace:configure.ac:1889: -1- _m4_warn([obsolete], [AC_OUTPUT should be used without arguments.
You should run autoupdate.], [])
m4trace:configure.ac:1889: -1- m4_pattern_allow([^LIB@&t@OBJS$])
m4trace:configure.ac:1889: -1- m4_pattern_allow([^LTLIBOBJS$])
